import { Meta, Title, Canvas } from '@storybook/addon-docs/blocks';
import CustomArgTypes from '../../blocks/CustomArgTypes';
import * as SelectStories from './Select.stories';

<Meta of={SelectStories} />

<Title />

Selects are used to present a list of options to the user.

<Canvas of={SelectStories.Demo} />

## Label Position

The select supports a `labelPosition` property/attribute to control the position of the label. The default value is `"inset"`
where the label is positioned inside the select, but it can also be set to `"block-start"` or "inline-start" to position the
label above or to the left of the select respectively.

### Block Start

This variant positions the label above the select.

<Canvas of={SelectStories.LabelAbove} />

### Inline Start

This variant positions the label to the left of the select.

<Canvas of={SelectStories.LabelInline} />

> **Note:** The `labelPosition` property is available via [global configuration](?path=/docs/getting-started-global-configuration--docs) if
> you want to set adjust the default value for all select in your application.

## Multiple

The select supports a `multiple` property/attribute to allow multiple options to be selected.

<Canvas of={SelectStories.Multiple} />

When the select is in multiple mode, the `value` property/attribute should be an array of selected values.

## Select All

When using the select in multiple mode, you can enable a "Select All" option by setting the `showSelectAll` property to `true`. This adds a convenient option at the top of the dropdown to select or deselect all available options at once.

<Canvas of={SelectStories.SelectAll} />

To customize the label for the "Select all" option, use the `selectAllLabel` property (or `select-all-label` attribute). This is useful for localization or when you want to use different wording.

When the "Select All" option is clicked, the component dispatches a `forge-select-all` event before the standard `change` event. The `forge-select-all` event detail contains:

- `value`: An array of all option values (when selecting all) or an empty array (when deselecting all)
- `isAllSelected`: A boolean indicating whether all options are now selected (`true`) or deselected (`false`)

You can prevent the select all action by calling `preventDefault()` on the `forge-select-all` event, which will also prevent the subsequent `change` event from being dispatched.

## API

<CustomArgTypes />

## Keyboard shortcuts

| Name | Description |
| :--- | :---------- |

| **Select Opened**
| `escape / space` | Closes the select.
| `tab / enter` | Selects the focused option and closes the select. If the "Select All" option is focused, toggles all options.
| `arrow down` | Highlights the next option if an option is selected, otherwise highlights the first option.
| `arrow up` | Highlights the previous option if an option is selected, otherwise highlights the first option.
| `home` | Highlights the first option that is not disabled.
| `end` | Highlights the last option that is not disabled.
| **Select Closed**
| `space / enter` | Opens the select.
| `arrow down` | Selects the next option if an option is selected, otherwise selects the first option.
| `arrow up` | Selects the previous option if an option is selected, otherwise selects the first option.
| **Select Closed and Multiple** |
| `arrow down / arrow up` | Opens the select and selects the first option

## Accessibility

- Ensure that all of the controls that are accessible by mouse are also accessible by keyboard.
  - Ensure the controls are reachable by the tab key.
  - Ensure each control can be updated or activated by the keyboard.
- Verify that the select list can be toggled open or closed by pressing the space or enter key.
- Verify that each active item in the select list can be reached by the up-arrow and down-arrow keys.
- Verify that in multiple-select mode, the Enter key can toggle an item as selected or un-selected.
- Verify that the select has a label and/or placeholder set via the `label` and `placeholder` properties/attributes.
  - The select does not support the `aria-label`, `aria-labelledby` attributes. Instead, use the `label` property/attribute to set an accessible label.

## CSS-Only

The select component is also available as a CSS-only component. This is a variant of the "field" component.

See the [field documentation](?path=/docs/components-field--docs#css-only) for more information on how to create
a CSS-only select.

> **Note:** The only difference is that the select will use a native `<select>` element instead of an `<input>` element.

```html
<div class="forge-field">
  <select>
    <option value="1">Option 1</option>
    <option value="2">Option 2</option>
    <option value="3">Option 3</option>
  </select>
</div>
```
