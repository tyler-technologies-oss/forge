import { Meta, Title, Canvas } from '@storybook/blocks';
import CustomArgTypes from '../../blocks/CustomArgTypes';
import * as AutocompleteStories from './Autocomplete.stories';

<Meta of={AutocompleteStories} />

<Title />

The autocomplete is considered an add-on component that allows you to wrap a `<forge-autocomplete>` element around any HTML that contains an `<input>` element. This allows the autocomplete to bind to that input and show suggestions in a popup as the user types.

It is expected that the consuming application provide a filter callback that the component can call when it needs to update the list of available options or suggestions. There are many variations of using an autocomplete, and while it's most commonly used together with a web service to provide suggestions asynchronously, it's up to the consuming application to choose how to fetch and return the options based on the current text the user has typed into the `<input>` element.

<Canvas of={AutocompleteStories.Demo} />

The only requirement in the HTML is to provide a child `<input>` element. While a Forge text-field component will typically be used, you can attach autocomplete functionality to any `<input>` element. This allows for flexibility in the styling of the input, while allowing the autocomplete to provide suggestions in the form of a floating popup anchored to that input.

The only requirement for integration via JavaScript is that you provide a callback function to the `filter` property to provide options based on the current filter text.

> **Note**: the `data-forge-dropdown-icon` attribute being applied to the trailing icon allows the autocomplete to provide the necessary styling to control open state rotation

## API

<CustomArgTypes />

## Keyboard Shorcuts

| Name | Description |
| :--- | :---------- |

| **Select Opened**
| `down / arrow down` | Opens the dropdown and activates the first option
| **Dropdown opened**
| `tab` | Single select: Select the active option
| `escape` | Close the dropdown when the dropdown is open
| `down / arrow down` | List keyboard shortcuts
| `up / arrow up` | List keyboard shortcuts
| `enter / home / end` | List keyboard shortcuts
| **Dropdown opened or closed**
| `backspace` | Two or more input.value.length: Removes the end character in the input.value
| `backspace` | One input.value.length and Single select and not a chipfield: Clears the input.value
| `delete` | Two or more input.value.length: Removes the start character in the input.value
| `delete` | One input.value.length and Single select and not a chipfield: Clears the input.value

## Accessibility

- Verify that you can tab into the autocomplete component.
- Verify that you can access the options within the autocomplete component using only the keyboard.
- The input element will receive the proper ARIA attributes such as aria-role="combobox", aria-live, aria-owns, ... etc.
- You should ensure that you either use a `<label>` element, or add an aria-label or aria-labelledby attribute to provide a meaningful label.
