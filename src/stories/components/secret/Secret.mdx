import { Canvas, Meta, Title } from '@storybook/addon-docs/blocks';
import CustomArgTypes from '../../blocks/CustomArgTypes';
import * as SecretStories from './Secret.stories';

<Meta of={SecretStories} />

<Title />

The secret component conceals inline content with a visual effect (blur or dots), revealing it on user interaction.

<Canvas of={SecretStories.Demo} />

## Variants

The secret component offers two visual effects for concealing content: blur and dots.

### Blur

The default variant applies a blur effect to conceal the content while maintaining its shape.

<Canvas of={SecretStories.Blur} />

### Dots

The dots variant replaces the content with a dot pattern when hidden.

<Canvas of={SecretStories.Dots} />

## With Label

Use the `label` slot to add descriptive text to the secret's button.

<Canvas of={SecretStories.WithLabel} />

## Show on Hover

Enable `show-on-hover` to reveal content on hover or focus in addition to click. This is useful for quick previews while still requiring an intentional click for mobile users.

<Canvas of={SecretStories.ShowOnHover} />

## Linked Group

Multiple secrets with the same `name` act as a linked group â€” only one can be visible at a time. This prevents multiple sensitive items from being exposed simultaneously.

<Canvas of={SecretStories.LinkedGroup} />

## Inline Usage

The component is designed to work inline with surrounding text.

<Canvas of={SecretStories.InlineUsage} />

## Programmatic Control

Control visibility programmatically using the `visible` property and listen for visibility changes via the `forge-secret-change` event.

<Canvas of={SecretStories.Programmatic} />

## API

<CustomArgTypes />

## Accessibility

The secret component follows accessibility best practices:

- Uses a `<button>` overlay with proper ARIA attributes (`role="group"`, `aria-label="secret"`, `aria-expanded`)
- Content is marked `inert` when hidden to prevent interaction and focus
- Screen reader announcements via `aria-live` region when content is revealed
- Full keyboard support (Enter/Space to toggle, Escape to hide)
- Uses `<forge-focus-indicator>` for clear focus styling
- Uses `<forge-state-layer>` for interaction feedback

### Labeling

Always provide context for secret content. Use the `label` slot or surrounding text so users understand what's hidden. Avoid relying solely on visual cues.

### Keyboard Support

| Key | Description |
|-----|-------------|
| <kbd>Enter</kbd> or <kbd>Space</kbd> | Toggle visibility |
| <kbd>Escape</kbd> | Hide visible content |

## Use Cases

- Sensitive information display (passwords, API keys, tokens)
- Privacy protection (email addresses, phone numbers, account numbers)
- Documentation examples (credentials, test data)
- Educational content (spoilers, quiz answers)
