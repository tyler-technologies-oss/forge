import { Default as ChipFieldDemo } from './chip-field.stories';
import {
  ChipFieldDefaultHtml,
  ChipFieldDefaultTs,
} from './code/chip-field-default';

<PageSection>

# Chip field

The chip field wraps a label, input and a collection of chips (or other elements if desired) with a set of exposed events you'll use for managing your
collection. It is used to provide users with an easy way to manage collections of simple data, like managing emails, or users by name.

It should not be used for data that is too complex to provide a simple short descriptor for. If you cannot create a short, 1-2 word descriptor for your
data or it requires more than one field to provide the context to the user, consider managing your collection through the [list component](?path=/story/components-list--default)
instead.

The chip field component can be composed together with the [autocomplete component](?path=/story/components-autocomplete--default) to
provide additional type ahead functionality.

> Use a debounce when actions can occur after a user stops typing. In cases where an HTTP request is fired, or some other long running task occurs, avoid executing those expensive tasks until the user has completed what they are searching for. Forge recommends a debounce of 500ms.

</PageSection>

---

<PageSection>

## Examples

The main idea to keep in mind when using this component is that the chip-field will let you know via its events that a chip is to be added/removed. It's up
to you to handle creating the chips that display within the field itself. This allows for flexibility in how these are managed, while also leaving it up to
you to provide the content for the chips as well as the accessibility.

### Simple

<LiveDemo layout="column" fullWidth codeHtml={ChipFieldDefaultHtml()} codeTs={ChipFieldDefaultTs()}>
  <ChipFieldDemo />
</LiveDemo>

> **Note:** The `type="field"` attribute added to the chip in the JavaScript. This is a special variant of the `<forge-chip>` component made specifically to be
> used with the `<forge-chip-field>` component. It has a slimmer `dense` profile as well as a few other internal differences that allow it to work well with form fields.

### Autocomplete

The chip-field can be composed together with the autocomplete to provide suggestions to the user as they type. This allows for a great user experience,
while also still allowing for flexibility based on your requirements.

Please see the [with autocomplete](?path=/story/components-chip-field--with-autocomplete) demo to see this in action!

</PageSection>

<PageSection>

## Properties/Attributes

<PropertyDef name="invalid" type="boolean" defaultValue="false">

Controls the invalid state. When set to `true`, the label and border will change to the error theme color.

</PropertyDef>

<PropertyDef name="required" type="boolean" defaultValue="false">

Controls the presence of an asterisk after the label to signify that the field is required.

</PropertyDef>

<PropertyDef name="floatLabelType" type="ChipFieldFloatLabelType" defaultValue="auto">

The type of floating label to use.

Valid values: `auto` (default), `always`.

</PropertyDef>

</PageSection>

---

<PageSection>

## Methods

<MethodDef name="floatLabel(): void">

Controls the floating state of the label. Call this to manually float the label.

</MethodDef>

</PageSection>

<PageSection>

## Events

| Name                           | Description
| :---------------------------   | :---------------------
| `input`                        | Native event emits from the input when the user is typing in the input.
| `change`                       | Native event emits from the input when its value changes.
| `forge-chip-field-member-added`  | Emits when the user presses Enter after typing into the input to add a member to the collection.
| `forge-chip-field-member-removed`| Emits when the the user presses Backspace to remove the last member from the collection.

</PageSection>

<PageSection>

## Keyboard shortcuts

| Name                                | Description
| :-----------------------------------| :----------------
| `arrow right / right`               | Moves focus to next member or input.
| `arrow left / left`                 | Moves focus to previous member.
| `backspace / delete`                | Removes either the active member or the last member if there is no active members and focuses the next member.
| `enter`                             | Adds a member if input has a value, and resets the input.
| `escape / tab`                      | Resets the input value.

</PageSection>

<PageSection>

## Slots

> A default (unnamed) slot exists, and it is intended that an `<input>` element will be placed in this slot.

| Name                           | Description
| :------------------------------| :----------------
| `label`                        | Projects the label element into the correct location with the proper typography.
| `member`                       | Projects each element with this slot to the collection area of the component. This slot will be present on each element comprising your collection.
| `helper-text`                  | Places content below the component with the proper typography.
| `leading`                      | Places content such as icons before the input.
| `trailing`                     | Places content such as icons after the input.
| `addon-end`                    | Places an element (such as icon button for example) after the input.

</PageSection>

<PageSection>

## CSS parts

| Name                           | Description
| :------------------------------| :----------------
| `root`                         | The root element.
| `container`                    | The container layout element.
| `label-input-container`        | The container element around the label and input slot.
| `input-container`              | The container element around the input slot only.
| `addon-end-container`          | The container element for the `addon-end` slot.

</PageSection>

<PageSection>

## CSS custom Properties

| Name                                                       | Description
| :----------------------------------------------------------| :---------------
| **Field**                                                 |
| `--forge-theme-form-field-disabled-on-background`         | Controls the disabled background-color of the field element.
| `--forge-chip-field-height`                               | Controls the height of the field element. Default value is `3.5rem`.
| `--forge-chip-field-margin-top`                           | Controls the margin-top of the field element. Default value is `0`.
| **Outline**                                               |
| `--forge-chip-field-theme-background`                     | Controls the background-color of the outline element.
| `--forge-theme-form-field-disabled-on-background`         | Controls the disabled background-color of the outline element.
| `--mdc-theme-text-icon-on-background`                     | Controls the border-color of the outline element.
| `--mdc-theme-text-primary-on-background`                  | Controls the hover border-color for the outline element.
| `--mdc-theme-primary`                                     | Controls the focused and focused-hover border-color for the outline element.
| `--mdc-theme-error`                                       | Controls the invalid border-color for the outline element.
| `--forge-theme-error-hover`                               | Controls the invalid-hover border-color for the outline element.
| `--mdc-theme-text-disabled-on-background`                 | Controls the disabled border-color of the outline element.
| **Label**                                                 |
| `--forge-theme-form-field-label-on-background`            | Controls the color of the label element.
| `--mdc-theme-primary`                                     | Controls the focused color of the label element.
| `--mdc-theme-error`                                       | Controls the invalid color of the label element.
| `--forge-theme-label-disabled-on-background`              | Controls the disabled color of the label element.
| **Required Asterisk**                                     |
| `--mdc-theme-error`                                       | Controls the error color for the required asterisk element.
| **Floating Label**                                        |
| `--forge-theme-form-field-label-on-background`            | Controls the color of the floating label element.
| `--mdc-theme-primary`                                     | Controls the focused color of the floating label element.
| `--mdc-theme-error`                                       | Controls the invalid color of the floating label element.
| `--forge-theme-form-field-text-disabled-on-background`    | Controls the disabled color of the floating label element.
| **Members**                                               |
| `--mdc-theme-primary`                                     | Controls the color of the member elements.
| `--mdc-theme-text-disabled-on-light`                      | Controls the disabled color of the member elements.
| **Input**                                                 |
| `--mdc-theme-text-primary-on-background`                  | Controls the color of the input element.
| `--forge-theme-form-field-text-disabled-on-background`    | Controls the disabled color of the input element.
| **Helper Text**                                           |
| `--mdc-theme-text-secondary-on-background`                | Controls the color of the helper text element.
| `--mdc-theme-error`                                       | Controls the invalid color of the helper text element.
| **Icons**                                                 |
| `--mdc-theme-text-secondary-on-background`                | Controls the color for the icon elements.
| `--mdc-theme-error`                                       | Controls the invalid color of the icon elements.
| `--mdc-theme-text-disabled-on-light`                      | Controls the disabled color of the icon elements.
| **Placeholder**                                           |
| `--mdc-theme-text-secondary-on-background`                | Controls the color of the placeholder element.

</PageSection>

<PageSection>

## Accessibility

- Add an `id` to your `<input>` element and bind it to your `<label>` element using the `for` attribute on the `<label>`.
- Ensure that the chips that are added to the field have descriptive `aria-label` or `aria-labelledby` attributes.
- Make sure that the member chips that are added can be accessed via the keyboard left and right arrows.
  - There should be a distinct visual cue that indicates which chip is focused
- Similarly, make sure that when a chip is focused using the arrow keys, that the backspace and delete keys do remove them.
- Ensure that when disabled, the entire field as well as the member chips all appear visually and interactively disabled.

</PageSection>

<PageSection>

## Types

### ChipFieldFloatLabelType

```ts
type ChipFieldFloatLabelType = 'always' | 'auto';
```

</PageSection>
