import { Default as CalendarDemo } from './calendar.stories';
import { CalendarDefaultCodeHtml } from './code/calendar-default';

<PageSection>

# Calendar

The calendar is a standalone date selection component that can be used to find dates by year, month, and day. You can use it inline on the page,
alongside other content or within your forms for display and selecting various dates.

> The calendar component is used within the [datepicker component](?path=/story/components-date-picker--default) for its date selection.

</PageSection>

---

<PageSection>

## Example

The calendar is typically configured via its public JavaScript API, or through HTML attributes. Its markup usage is simple:

<LiveDemo codeHtml={CalendarDefaultCodeHtml()}>
  <CalendarDemo />
</LiveDemo>

</PageSection>

---

<PageSection>

## Properties/Attributes

<PropertyDef name="month" type="number" defaultValue="<current month>">

Sets the currently visible month by providing the numeric month value (0-11).
  
</PropertyDef>

<PropertyDef name="year" type="number" defaultValue="<current year>">

Sets the currently visible year by providing the numeric year value.
  
</PropertyDef>

<PropertyDef name="value" type="Date | Date[] | DateRange | null" attr={false} defaultValue="null">

Sets the selected dates by providing a single `Date` object, array of `Date` objects, `DateRange` object, or `null` to remove the selections.
  
</PropertyDef>

<PropertyDef name="mode" type="CalendarMode" defaultValue="single">

Gets/sets the selection mode of the calendar. Valid values: `single`, `multiple`, `range`.
  
</PropertyDef>

<PropertyDef name="activeDate" type="Date" attr={false} defaultValue="<current active date>">

Gets the currently active/focused date in the calendar. Readonly.

</PropertyDef>

<PropertyDef name="showToday" type="boolean" defaultValue="true">

Toggles whether the current day is highlighted or not.
  
</PropertyDef>

<PropertyDef name="showOtherMonths" type="boolean" defaultValue="true">

Toggles whether the dates outside the currently visible month are shown.
  
</PropertyDef>

<PropertyDef name="min" type="Date | string | null" defaultValue="null">

Sets the minimum date. Accepts a date or date string, an offset `string`, or `null`.

> `min` and `max` accept an offset `string` containing number values followed by 'y', 'm', 'w', or 'd' corresponding to an amount of years, months, weeks, or days. For example, '1m 2w' sets a date one month and two weeks after today.
  
</PropertyDef>

<PropertyDef name="max" type="Date | string | null" defaultValue="null">

Sets the maximum date. Accepts a date or date string, an offset `string`, or `null`.
  
</PropertyDef>

<PropertyDef name="fixedHeight" type="boolean" defaultValue="false">

Forces the calendar to maintain a consistent height between months. 

</PropertyDef>

<PropertyDef name="preventFocus" type="boolean" defaultValue="false">

Disallows focus events on the calendar when the user interacts with the mouse.
  
</PropertyDef>

<PropertyDef name="readonly" type="boolean" defaultValue="false">

Sets whether dates can be selected by the user.

</PropertyDef>

<PropertyDef name="allowSingleDateRange" type="boolean" defaultValue="true">

Sets whether a range selection can begin and end on the same date.

</PropertyDef>

<PropertyDef name="disabledDates" type="Date | Date[] | null" attr={false} defaultValue="null">

Sets dates that cannot be selected.
  
</PropertyDef>

<PropertyDef name="disabledDaysOfWeek" type="DayOfWeek | DayOfWeek[] | null" defaultValue="null">

Disables days of the week for every month.

</PropertyDef>

<PropertyDef name="constrainToEnabled" type="boolean" defaultValue="true">

Prevents navigation beyond the min and max dates.

</PropertyDef>

<PropertyDef name="events" type="ICalendarEvent[] | null" attr={false} defaultValue="null">

Get/sets an array of events to be displayed.

</PropertyDef>

<PropertyDef name="view" type="CalendarView" defaultValue="date">

Sets the whether the calendar shows dates, months, or years. This can be used to enable month and year picking when the built in header is hidden.
Valid values: `date`, `month`, `year`.
  
</PropertyDef>

<PropertyDef name="showHeader" type="boolean" defaultValue="true">

Shows or hides the header.
  
</PropertyDef>

<PropertyDef name="clearButton" type="boolean" defaultValue="false">

Toggles whether the clear button is visible.

</PropertyDef>

<PropertyDef name="todayButton" type="boolean" defaultValue="false">

Toggles whether the today button is visible.

</PropertyDef>

<PropertyDef name="yearRange" type="string" defaultValue="'-50:+50'">

Sets the range of years selectable in the year menu. The value is two years or offsets from the current year for the start and end of the range, separated by a colon. If a min or max date is set it will take priority.

</PropertyDef>

<PropertyDef name="menuAnimation" type="CalendarMenuAnimationType" defaultValue="scale">

Sets the animation used when opening and closing the month and year menus. Valid values: `scale`, `fade`, `none`.

</PropertyDef>

<PropertyDef name="listYears" type="boolean" defaultValue="true">

Toggles whether years in the menu are shown in a list or grid.

</PropertyDef>

<PropertyDef name="selectionFollowsMonth" type="boolean" defaultValue="false">

Toggles whether selecting a month or year from the menu changes the selected date to match in single mode.

</PropertyDef>

<PropertyDef name="locale" type="string" defaultValue="undefined">

A Unicode locale identifier string to use when rendering the calendar. This sets regional date display, text direction, the first day of the week, and weekend days. The browser's locale will be used if `undefined`.

</PropertyDef>

<PropertyDef name="firstDayOfWeek" type="DayOfWeek" defaultValue="undefined">

Sets the day each week starts on. Set by the locale if `undefined`.

</PropertyDef>

<PropertyDef name="weekendDays" type="DayOfWeek[] | null" attr={false} defaultValue="undefined">

Sets weekend days. Set by the locale if `undefined`. Dates marked as weekend days don't display differently by default, but can be styled in CSS by selecting the `weekend` part.

</PropertyDef>

<PropertyDef name="dateBuilder" type="CalendarDateBuilder" attr={false} defaultValue="undefined">

Sets the callback that will be executed when a date is added to the calendar, allowing access to the HTML element.

</PropertyDef>

<PropertyDef name="dayBuilder" type="CalendarDayBuilder" attr={false} defaultValue="undefined">

Sets the callback that will be executed when a day of the week header is added to the calendar. Allows access to the HTML element to inject content.

</PropertyDef>

<PropertyDef name="dateSelectCallback" type="CalendarDateSelectCallback" attr={false} defaultValue="undefined">

Sets the callback that will be executed when the user selects a date.

Using this callback allows you to determine if the date can be selected/deselected before the UI state changes.
  
</PropertyDef>

<PropertyDef name="disabledDateBuilder" type="CalendarDisabledDateBuilder" attr={false} defaultValue="undefined">

Sets a callback that will be executed on every date in the calendar and input. Return true to disable the day.

</PropertyDef>

<PropertyDef name="eventBuilder" type="CalendarEventBuilder" attr={false} defaultValue="undefined">

Sets a callback that will be executed on every date in the calendar and returns events that should be set on it.

</PropertyDef>

<PropertyDef name="tooltipBuilder" type="CalendarTooltipBuilder" attr={false} defaultValue="undefined">

Sets a callback that will be executed on every date in the calendar and returns content for a tooltip to be set on it..

</PropertyDef>

<PropertyDef name="clearCallback" type="() => void" attr={false} defaultValue="undefined">

Sets a callback that will be executed when the clear button is clicked.

</PropertyDef>

<PropertyDef name="todayCallback" type="() => void" attr={false} defaultValue="undefined">

Sets a callback that will be executed when the today button is clicked.

</PropertyDef>

</PageSection>

---

<PageSection>

## Methods

<MethodDef name="selectDate(date: Date setFocus?: boolean): void;">

Selects the provided date. If `setFocus` is `true` the date will receive focus.

</MethodDef>

<MethodDef name="deselectDate(date: Date): void;">

Deselects the provided date.

</MethodDef>

<MethodDef name="toggleDate(date: Date, force?: boolean): void;">

Toggles the selected state of the provided date. Set `force` to explicitly select or deselect the date.

</MethodDef>

<MethodDef name="clear(): void;">

Deselects all dates.

</MethodDef>

<MethodDef name="goToDate(date: Date, setFocus?: boolean): void">

Goes to the month with the provided date. If `setFocus` is `true` the date will receive focus.

</MethodDef>

<MethodDef name="today(): void">

Brings the current date into view.

</MethodDef>

<MethodDef name="layout(): void;">

Re-renders the component as a whole. Useful if object/array instances were updated, but the references weren't changed.

</MethodDef>

<MethodDef name="handleKey(evt: KeyboardEvent): void;">

Handles external key events. Typically used by other components, see the date picker for an example.

If this component is used inside of a custom component, this will allow you to propagate key events through to the calendar if desired.

</MethodDef>

<MethodDef name="setActiveDate(date: Date, setFocus?: boolean): void;">

Sets the actively highlighted date on the current month (only if the date exist on the current visible month).

If `setFocus` is `true` the date will receive focus.

</MethodDef>

</PageSection>

<PageSection>

## Events

| Name                                          | Description
| :---------------------------------------------| :----------------
| `forge-calendar-date-select`                    | Emits when a new date is selected. This event is of type `CustomEvent<ICalendarDateSelectEvent>`, and can be cancelled.
| `forge-calendar-focus-change`                   | Emits when the focusable date, month, or year element changes. This event is of type `CustomEvent<ICalendarFocusChangeEventData>`.
| `forge-calendar-month-change`                   | Emits when the month or year in view changes. This event is of type `CustomEvent<ICalendarMonthSelectEventData>`.
| `forge-calendar-view-change`                    | Emits when the month or year menu opens or closes. This event is of type `CustomEvent<CalendarView>`.

</PageSection>

<PageSection>

## Keyboard shortcuts

| Name                                | Description
| :-----------------------------------| :----------------
| **Date view**                       |
| `arrow left / arrow right (rtl)`    | Moves focus to previous date.
| `arrow right / arrow left (rtl)`    | Moves focus to next date.
| `arrow up`                          | Moves focus to previous week.
| `arrow down`                        | Moves focus to next week.
| `home`                              | Moves focus to first of week.
| `home + shift`                      | Moves focus to first of month.
| `end`                               | Moves focus to last of week.
| `end + shift`                       | Moves focus to last of month.
| `pageup`                            | Moves focus to previous month.
| `pageup + shift`                    | Moves focus to previous year.
| `pagedown`                          | Moves focus to next month.
| `pagedown + shift`                  | Moves focus to next year.
| `space / enter`                     | Select the focused date.
| **Month view**                      |
| `arrow left / arrow right (rtl)`    | Moves focus to the previous year.
| `arrow right / arrow left (rtl)`    | Moves focus to the next year.
| `arrow up`                          | Moves menu focus up.
| `arrow down`                        | Moves menu focus down.
| `pageup`                            | Moves to previous year.
| `pagedown`                          | Moves to next year.
| `space / enter`                     | Select the focued menu item.
| `escape`                            | Closes the month view.
| **Year View**                       |
| `arrow left / arrow right (rtl)`    | Moves focus to previous set of years.
| `arrow right / arrow left (rtl)`    | Moves focus to next set of years.
| `arrow up`                          | Moves menu focus up.
| `arrow down`                        | Moves menu focus down.
| `pageup`                            | Moves to previous set of year.
| `pagedown`                          | Moves to next set of year.
| `space / enter`                     | Select the focued menu item.
| `escape`                            | Closes the year view.
| **All Views**                       |
| `m`                                 | Show / hide the month view.
| `y`                                 | Show / hide the year view.
| `t / n`                             | Moves focus to today's date.
| `delete / backspace`                | Deselects all dates.

</PageSection>

<PageSection>

## CSS parts

| Name                             | Description
| :--------------------------------| :----------
| `root`                           | The root element.
| `view`                           | The view element.
| `date-view`                      | The date view element.
| `date-view-container`            | The date view container element.
| `date-view-row`                  | The date view row element.
| `date-grid-container`            | The container element for the date grid.
| `calendar-menu`                  | The `<forge-calendar-menu>` element.
| `sunday`                         | The sunday day container element.
| `monday`                         | The monday day container element.
| `tuesday`                        | The tuesday day container element.
| `wednesday`                      | The wednesday day container element.
| `thursday`                       | The thursday day container element.
| `friday`                         | The friday day container element.
| `saturday`                       | The saturday day container element.
| `clear-button`                   | The clear button element.
| `date`                           | The date container element.
| `date-other-month`               | The other month date element.
| `date-wrapper`                   | The date wrapper element.
| `day`                            | The day element.
| `event`                          | The event element.
| `event-wrapper`                  | The event wrapper element.
| `footer`                         | The footer container element.
| `header`                         | The header container element.
| `month-button`                   | The month button container element.
| `month-button-element`           | The month `<button>` element.
| `next-button`                    | The next button container element.
| `previous-button`                | The previous button container element.
| `range`                          | The range element.
| `range-end`                      | The range-ene element.
| `range-start`                    | The range-start element.
| `today`                          | The today container element.
| `today-button`                   | The today button element.
| `weekend`                        | The weekend element.
| `year-button`                    | The year button container element.
| `year-button-element`            | The year `<button>` element.

</PageSection>

<PageSection>

## CSS custom properties

### Calendar 

| Name                                      | Description
| :-----------------------------------------| :----------------
| `--forge-calendar-menu-max-height`        | Controls the max height of a the menu when displayed as a grid.
| `--mdc-theme-primary`                     | Controls the primary theme color used throughout the component.
| `--mdc-theme-on-primary`                  | Controls the on-primary theme color used throughout the component.
| `--forge-theme-border-color`              | Controls the border-color theme color used throughout the component.
| `--mdc-theme-text-disabled-on-light`      | Controls the disabled color used for day cells.

### Events

| Name                                              | Description
| :-------------------------------------------------| :----------------
| `--forge-calendar-event-dot-size`                 | Controls the dot size for events.
| `--forge-calendar-theme-event-primary-accent`     | Controls the color of primary theme for events.
| `--forge-calendar-theme-event-secondary-accent`   | Controls the color of secondary theme for events.
| `--forge-calendar-theme-event-blue-accent`        | Controls the color of blue theme for events.
| `--forge-calendar-theme-event-light-green-accent` | Controls the color of light green theme for events.
| `--forge-calendar-theme-event-cyan-accent`        | Controls the color of cyan theme for events.
| `--forge-calendar-theme-event-teal-accent`        | Controls the color of teal theme for events.
| `--forge-calendar-theme-event-orange-accent`      | Controls the color of orange theme for events.
| `--forge-calendar-theme-event-blue-grey-accent`   | Controls the color of blue grey theme for events.
| `--forge-calendar-theme-event-grey-accent`        | Controls the color of grey theme for events.
| `--forge-calendar-theme-event-red-accent`         | Controls the color of red theme for events.
| `--forge-calendar-theme-event-pink-accent`        | Controls the color of pink theme for events.
| `--forge-calendar-theme-event-purple-accent`      | Controls the color of purple theme for events.
| `--forge-calendar-theme-event-light-blue-accent`  | Controls the color of light blue theme for events.
| `--forge-calendar-theme-event-deep-purple-accent` | Controls the color of deep purple theme for events.
| `--forge-calendar-theme-event-green-accent`       | Controls the color of green theme for events.
| `--forge-calendar-theme-event-lime-accent`        | Controls the color of lime theme for events.
| `--forge-calendar-theme-event-yellow-accent`      | Controls the color of yellow theme for events.
| `--forge-calendar-theme-event-brown-accent`       | Controls the color of brown theme for events.
| `--forge-calendar-theme-event-deep-orange-accent` | Controls the color of deep orange theme for events.

</PageSection>

<PageSection>

## Accessibility

* Ensure that the days can be navigated by keyboard.
* Ensure that each day is properly announced via screen reader, including its selected state.

</PageSection>

---

<PageSection>

## Types

### ICalendarDate

```typescript
interface ICalendarDate {
  date: Date;
  selected: boolean;
  events: ICalendarEvent[];
}
```

### ICalendarDateConfig

```typescript
interface ICalendarDateConfig {
  date: Date;
  selected: boolean;
  today: boolean;
  thisMonth: boolean;
  disabled: boolean;
}
```

### ICalendarEvent

```typescript
interface ICalendarEvent {
  date: Date;
  label: string;
  color: CalendarEventColor | string;
}
```

### ICalendarDateSelectEventData

```typescript
interface ICalendarDateSelectEventData {
  date: Date | null;
  selected: boolean;
  range?: DateRange;
  rangeSelectionState?: RangeSelectionState;
  type: CalendarView;
}
```

### ICalendarMonthSelectEventData

```typescript
interface ICalendarMonthSelectEventData {
  month: number;
  userSelected: boolean;
  year: number;
}
```

### ICalendarFocusChangeEventData

```typescript
interface ICalendarFocusChangeEventData {
  selected: boolean;
  text: string;
  type: CalendarView;
  value: Date | number;
}
```

### DayOfWeek

```typescript
enum DayOfWeek {
  Sunday = 0,
  Monday = 1,
  Tuesday = 2,
  Wednesday = 3,
  Thursday = 4,
  Friday = 5,
  Saturday = 6
}
```

### CalendarMode

```typescript
type CalendarMode = 'single' | 'multiple' | 'range';
```

### CalendarView

```typescript
type CalendarView = 'date' | 'month' | 'year';
```

### CalendarMenuAnimationType

```typescript
type CalendarMenuAnimationType = 'scale' | 'fade' | 'none';
```

### RangeSelectionState

```typescript
type RangeSelectionState = 'none' | 'from' | 'to';
```

### CalendarEventColor

```typescript
type CalendarEventColor = 'primary' | 'secondary' | 'blue' | 'light-green' | 'cyan' | 'teal' | 'orange' | 'blue-grey' | 'grey' | 'red' | 'pink' | 'purple' | 'light-blue' | 'deep-purple' | 'green' | 'lime' | 'yellow' | 'brown' | 'deep-orange';
```

### CalendarDateBuilder

```typescript
type CalendarDateBuilder = (date: ICalendarDateConfig, element: HTMLElement) => HTMLElement;
```

### CalendarDateSelectCallback

```typescript
type CalendarDateSelectCallback = (date: ICalendarDate) => boolean | Promise<boolean>;
```

### CalendarDayBuilder

```typescript
type CalendarDayBuilder = (day: DayOfWeek, element: HTMLElement) => HTMLElement;
```

### CalendarDisabledDateBuilder

``` typescript
type CalendarDisabledDateBuilder = (date: Date) => boolean;
```

### CalendarEventBuilder

```typescript
type CalendarEventBuilder = (date: Date) => ICalendarEvent[] | ICalendarEvent | null;
```

### CalendarTooltipBuilder

```typescript
type CalendarTooltipBuilder = (date: ICalendarDate, content: string) => string | null;
```

</PageSection>
