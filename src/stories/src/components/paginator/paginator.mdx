import { Default as PaginatorDemo } from './paginator.stories';
import { PaginatorDefaultHtml } from './code/paginator-default';
import { PaginatorAlternativeHtml } from './code/paginator-alternative';

<PageSection>

# Paginator

The paginator is a component that simply renders itself based on the configuration data provided to it.

In its most form, you use this component by providing a total record count, page size, and page index. The component will adjust its UI to only allow the user
to select a page within range of pages that it calculates. It will then let you know when the user interacts with it so that you can update your data.

While this component is typically used alongside the [table](?path=/story/components-table--default), you can pair this with any UI that is responsible showing large sets of
data on the page where you only want to show a subset of the data at any given time.

> When paging your data, you will typically set up your web services to accept multiple parameters that will allow you to fetch a specific subset of the data from the server.
> Avoid trying to load and apge all of the data on your page to the client.

</PageSection>

---

<PageSection>

## Example

It's important to note the paginator is not connected to your data in any way, and does not make any assumptions about how you render that data. It's simply
used as a means to allow the user to adjust which portion of the data they want to view.

It's up to you to use another component to render the data that is reflected by the state of the paginator.

### Basic

<LiveDemo codeHtml={PaginatorDefaultHtml()}>
  <PaginatorDemo/>
</LiveDemo>

### Alternative

Use the alternative layout when you are limited on space with the default layout. This is common for mobile layouts in particular.

<LiveDemo codeHtml={PaginatorAlternativeHtml()}>
  <PaginatorDemo alternative={true}/>
</LiveDemo>

### Common

While typically you will dynamically update the properties for this component, you will use the 3 properties/attributes seen below. It's common that
you will respond to the `change` event that gets emitted from this component to then update these values as you perform paging of your data.

```html
<forge-paginator total="100" page-size="10" page-index="1"></forge-paginator>
```

> Try combining the paginator with the [table component](?path=/story/components-table--default) to allow for paging of data table rows.

</PageSection>

<PageSection>

## Properties/Attributes

<PropertyDef name="pageIndex" type="number" defaultValue="0">

  Gets/sets the current page index. This controls which page is currently selected.

</PropertyDef>

<PropertyDef name="pageSize" type="number" defaultValue="25">

  Gets/sets the total number of items that you want to display on a single page.

</PropertyDef>

<PropertyDef name="offset" type="number" defaultValue="0">

  Sets page index by providing the number of items to skip. The getter for this property returns the number of items to skip.

</PropertyDef>

<PropertyDef name="total" type="number" defaultValue="0">

  Gets/sets the total number of items to page through. This is the full count of the un-paged data.

</PropertyDef>

<PropertyDef name="pageSizeOptions" type="number[] | boolean" defaultValue="[5, 15, 25, 50, 100]">

  Gets/sets the total number of items to page through. This is the full count of the un-paged data.

  **Note:** you can pass `false` to this property to hide the page-size select completely.

</PropertyDef>

<PropertyDef name="label" type="string" defaultValue="Rows per page:">

  Gets/sets the label that is shown to the far left of the component.

</PropertyDef>

<PropertyDef name="firstLast" type="boolean" defaultValue="false">

  Controls the visibility of the first/last page buttons.

</PropertyDef>

<PropertyDef name="first" type="boolean" defaultValue="false">

  Controls whether to show the first page button individually or not.

</PropertyDef>

<PropertyDef name="disabled" type="boolean" defaultValue="false">

  Gets/sets the disabled state of the component.

</PropertyDef>

<PropertyDef name="alternative" type="boolean" defaultValue="false">

  Gets/sets whether the component renders in the alternative (minimal) format for use in smaller containers.

</PropertyDef>

<PropertyDef name="alignment" type="PaginatorAlternativeAlignment" defaultValue="'space-between'">

  Gets/sets the alignment of the paginator when using the `alternative` layout.

</PropertyDef>

<PropertyDef name="rangeLabelCallback" attr={false} type="PaginatorRangeLabelBuilder" defaultValue="undefined">

Sets the callback that will execute when the range label is rendered. This allows you to customize the range label text.

Example usage:
```typescript
const rangeLabelCallback: PaginatorRangeLabelBuilder = ({ pageStart, pageEnd, total }: IPaginatorRangeState) => {
  return `items ${pageStart} thru ${pageEnd} out of ${total} total`;
};
```

</PropertyDef>

</PageSection>

<PageSection>

## Events

| Name                              | Description
| :---------------------------------| :-----------------
| `forge-paginator-change`            | Emits when the current page has changed. The `event.detail` property contains the event data, and is of type `IPaginatorChangeEvent`.

</PageSection>

<PageSection>

## CSS parts

| Name                           | Description
| :------------------------------| :-----------------
| `root`                         | The root element.
| `label`                        | The label text container element.
| `container`                    | The layout container element.
| `page-size-options`            | The `<forge-select>` element for the page size options.
| `range-label`                  | The range label container element.
| `range-label-alternative`      | The alternative range label text container.
| `first-page-button`            | The `<forge-icon-button>` element for the first page button.
| `first-page-button-element`    | The `<button>` element for the first page button.
| `first-page-icon`              | The `<forge-icon>` element for the first page button.
| `last-page-button`             | The `<forge-icon-button>` element for the last page button.
| `last-page-button-element`     | The `<button>` element for the last page button.
| `last-page-icon`               | The `<forge-icon>` element for the last page button.
| `previous-page-button`         | The `<forge-icon-button>` element for the previous page button.
| `previous-page-button-element` | The `<button>` element for the previous page button.
| `previous-page-icon`           | The `<forge-icon>` element for the previous page button.
| `next-page-button`             | The `<forge-icon-button>` element for the next page button.
| `next-page-button-element`     | The `<button>` element for the next page button.
| `next-page-icon`               | The `<forge-icon>` element for the next page button.

</PageSection>

<PageSection>

## CSS custom properties

| Name                                              | Description
| :-------------------------------------------------| :-----------------
| `--mdc-theme-text-primary-on-background`          | Controls the button font color.   

</PageSection>

<PageSection>

## Accessibility

- Ensure that all of the controls that are accessible by a mouse are also accessible by keyboard.
  - Ensure the controls are reachable by the tab key.
  - Ensure each control can be updated or activated by the keyboard.
- The paginator component will handle adding the proper ARIA attributes to its internal elements.

</PageSection>

---

<PageSection>

## Types

The following types are TypeScript interfaces that represent the expected data types that this component uses.

### IPaginatorChangeEvent

```typescript
interface IPaginatorChangeEvent {
  type: string;
  pageSize: number;
  pageIndex: number;
  offset: number;
}
```

### ISelectOption

```typescript
interface ISelectOption {
  label: string;
  value: string;
}
```

### PaginatorAlternativeAlignment

```typescript
type PaginatorAlternativeAlignment = 'start' | 'space-between' | 'end';
```

### IPaginatorRangeState

```typescript
interface IPaginatorRangeState {
  pageSize: number;
  pageIndex: number;
  offset: number;
  pageStart: number;
  pageEnd: number;
  total: number;
}
```

### PaginatorRangeLabelBuilder

```typescript
type PaginatorRangeLabelBuilder = ((state: IPaginatorRangeState) => string) | undefined | null;
```

</PageSection>
