import { Default as TabBarDemo } from './tab-bar.stories';
import { TabBarDefaultHtml, TabBarDefaultTs} from './code/tab-bar-default';

<PageSection>

# Tab bar

The tab bar component allows for controlling sub-navigation within a page. This component does **not** handle swapping out tab panels for you, but
it will just allow for you respond to the tab index changing to hide/show the correct panel.

Tab bar can easily be paired with [view switcher component](?path=/story/components-view-switcher--default) to switch between views on a page.

</PageSection>

---

<PageSection>

## Examples

### Basic

<LiveDemo fullWidth layout="column" codeHtml={TabBarDefaultHtml()} codeTs={TabBarDefaultTs()}>
  <TabBarDemo />
</LiveDemo>

### With View switcher

See the [View Switcher](?path=/story/components-view-switcher--default)

</PageSection>

---

<PageSection>

## Tab Bar Properties/Attributes

<PropertyDef name="activeTab" type="number" defaultValue="-1">

  Gets/sets the active tab index.

</PropertyDef>

<PropertyDef name="layoutMode" type="TabBarLayoutMode" defaultValue="fixed">

  Gets/sets the layout mode that controls how the tabs are sized and rendered.

  Valid values: `fixed`, `clustered`.

</PropertyDef>

<PropertyDef name="layoutAlign" type="TabBarLayoutAlign" defaultValue="start">

  Gets/sets the layout alignment.

  Valid values: `start`, `center`, `end`.

  > Only pertains to non-full width layout modes.

</PropertyDef>

<PropertyDef name="underline" type="boolean" defaultValue="false">

  Gets/sets whether the component displays an underline or not.

</PropertyDef>

<PropertyDef name="autoActivate" type="boolean" defaultValue="false">

  Gets/sets whether tabs are auto-activated when using arrow keys.

  Keys which auto activate: `ArrowLeft`, `ArrowRight`, `End`.

</PropertyDef>

<PropertyDef name="stacked" type="boolean" defaultValue="false">

  Gets/sets whether the tabs are displayed with as their stacked variant.

</PropertyDef>

<PropertyDef name="scrollButtons" type="boolean" defaultValue="true">

  Gets/sets whether the scroll buttons can be displayed or not.

  The component handles visibility automatically.

  > *Note: scroll buttons will only be added on mobile devices

</PropertyDef>

<PropertyDef name="forceScrollButtons" type="boolean" defaultValue="false">

  Gets/sets whether the scroll buttons are visible indefinitely or not.

  > *Note: scroll buttons will be added on all devices

</PropertyDef>

</PageSection>

<PageSection>

## Tab Properties/Attributes

<PropertyDef name="disabled" type="boolean" defaultValue="false">

  Gets/sets whether the tab is disabled or not.

</PropertyDef>

<PropertyDef name="active" type="boolean" defaultValue="false">

  Gets/sets whether the tab is active or not.

</PropertyDef>

<PropertyDef name="stretch" type="boolean" defaultValue="false">

  Gets/sets whether the tab will stretch or not.

</PropertyDef>

</PageSection>

<PageSection>

## Tab Bar Methods

<MethodDef name="activateTab(index: number): void">

  Activates the tab at the given index.

</MethodDef>

<MethodDef name="scrollTabIntoView(index: number): void">

  * Scrolls the tab at the given index into view.

</MethodDef>

</PageSection>

<PageSection>

## Tab Methods

<MethodDef name="activate(previousIndicatorClientRect?: DOMRect): void">

  Activates the tab and moves the tab indicator.

</MethodDef>

<MethodDef name="deactivate(): void">

  Deactivates the tab.

</MethodDef>

<MethodDef name="computeIndicatorBounds(): DOMRect | undefined">

  Computes the bounding rect of the tab indicator.

</MethodDef>

<MethodDef name="computeDimensions(): ITabDimensions">

  Compute dimensions of tab.

</MethodDef>

<MethodDef name="setTabIndex(value: number): void">

  Sets the index of the tab.

</MethodDef>

</PageSection>

<PageSection>

## Tab Bar Events

| Name                            | Description
| :-------------------------------| :----------------
| `forge-tab-bar-activate`          | Emits when the user activates a new tab.

</PageSection>

<PageSection>

## Tab Events

| Name                            | Description
| :-------------------------------| :----------------
| `forge-tab-interacted`            | Emits when the user interacts with a tab.

</PageSection>

<PageSection>

## Keyboard shortcuts

| Name                                | Description
| :-----------------------------------| :----------------
| `arrow left`                        | Focus previous tab.
| `arrow right`                       | Focus next tab.
| `end`                               | Focus end tab.
| `space / enter`                     | Activate the focused tab.
| **Auto Activate**                   |
| `arrow left`                        | Activate and focus previous tab.
| `arrow right`                       | Activate and focus next tab.
| `end`                               | Activate and focus end tab.

</PageSection>

<PageSection>

## Tab Bar Slots

| Name                          | Description
| :-----------------------------| :----------------------
| `default`                     | The default (unnamed) slot where the tab will be rendered.

</PageSection>

<PageSection>

## Tab Slots

| Name                          | Description
| :-----------------------------| :----------------------
| `top`                         | The top slot for content to render above the default slot. This is typically an icon element.
| `default`                     | The default (unnamed) slot where the tab text or icon will be rendered.
| `leading`                     | The leading slot for content to render before the default slot. This is typically an icon element.
| `trailing`                    | The trailing slot for content to render after the default slot. This is typically an icon element.

</PageSection>

<PageSection>

## Tab Bar CSS parts

| Name                      | Description
| :-------------------------| :--------------------
| `root`                    | The root element.
| `previous-container`      | The previous button container element.
| `previous-button`         | The previous button `<forge-icon-button>` element.
| `previous-button-element` | The previous button `<button>` element.
| `previous-button-icon`    | The previous button `<forge-icon>` element.
| `tab-scroller`            | The tab scroller container element.
| `scroll-area`             | The scrollable container area.
| `scroll-content`          | The scrollable container around the default slot.
| `next-container`          | The next button container element.
| `next-button`             | The next button `<forge-icon-button>` element.
| `next-button-element`     | The next button `<button>` element.
| `next-button-icon`        | The next button `<forge-icon>` element.

</PageSection>

<PageSection>

## Tab CSS parts

| Name                            | Description
| :-------------------------------| :--------------------
| `button`                        | The root `<button>` element.
| `content`                       | The content conatiner element.
| `text`                          | The text container element.
| `indicator-container`           | The indicator container element.
| `indicator`                     | The indicator element.
| `ripple-container`              | The ripple sentinel element.

</PageSection>

<PageSection>

## Tab Bar CSS custom properties

| Name                                            | Description
| :-----------------------------------------------| :--------------------
| `--forge-theme-border-color`                    | Controls the color of tab bar underline.
| `--forge-tab-bar-height`                        | Controls the height.

</PageSection>

<PageSection>

## Tab CSS custom properties

| Name                                            | Description
| :-----------------------------------------------| :--------------------
| `--mdc-theme-primary`                           | Controls the font color of active tab.
| `--mdc-theme-text-secondary-on-light`           | Controls the font color of tab.
| `--mdc-theme-text-disabled-on-background`       | Controls the font color of disabled tab.

</PageSection>

<PageSection>

## Accessibility

- Ensure that all of the controls that are accessible by a mouse are also accessible by keyboard.
- Ensure the controls are reachable by the tab key.
- Ensure each control can be updated or activated by the keyboard.
- Ensure that only the selected tab content is reachable by keyboard.

It's expected that you will need to provide the `tabpanel` roles to your elements to indicate to assistive technologies
which elements are responsible for  tab content respectively. Each tab should contain an `aria-controls` property identifying
its corresponding tab content. In addition, each tab content element should be labelled by a tab.

```html
<forge-tab-bar>
  <forge-tab aria-controls="panel-1" id="tab-1"></forge-tab>
  <forge-tab aria-controls="panel-2" id="tab-2"></forge-tab>
</forge-tab-bar>
<div role="tabpanel" aria-labelledby="tab-1" id="panel-1"></div>
<div role="tabpanel" aria-labelledby="tab-2" id="panel-2"></div>
```

> **Note:** the `<forge-tab-bar>` element receives the `role="tablist"` automatically.
> **Note:** the `<forge-tab>` elements receive the `role="tab"` automatically.

</PageSection>

---

<PageSection>

## Tab Bar Types

### ITabBarActivateEventData

```ts
interface ITabBarActivateEventData {
  index: number;
}
```

### TabBarLayoutMode

```ts
type TabBarLayoutMode = 'fixed' | 'clustered';
```

### TabBarLayoutAlign

```ts
type TabBarLayoutAlign = 'start' | 'center' | 'end';
```

</PageSection>

<PageSection>

## Tab Types

### ITabDimensions

```ts
interface ITabDimensions {
  rootLeft: number;
  rootRight: number;
  contentLeft: number;
  contentRight: number;
}
```

</PageSection>
