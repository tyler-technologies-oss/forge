import { Default as ColorPickerDemo } from './color-picker.stories';
import { ColorPickerDefaultCodeHtml } from './code/color-picker-default';

<PageSection>

# Color picker

This component offers an interface for the user to select and adjust color values. It can produce values in various formats such as Hex, RGB and HSV.

> This is just a standalone component. It can be used within a floating [popup element](?path=/story/components-popup--default) if desired.

</PageSection>

---

<PageSection>

## Example

The color picker is a completely encapsulated component. All programmatic interaction is done through its public API, and it emits events when the value changes.

<LiveDemo codeHtml={ColorPickerDefaultCodeHtml()}>
  <ColorPickerDemo/>
</LiveDemo>

</PageSection>

---

<PageSection>

## Properties/Attributes

<PropertyDef name="value" type="string" defaultValue="null">

Gets/sets the color value. **Format must be in hex.**
  
</PropertyDef>

<PropertyDef name="allowOpacity" type="boolean" defaultValue="true">

Controls the visibility of the opacity control.
  
</PropertyDef>

<PropertyDef name="rgba" type="IRGBA | null" attr={false} defaultValue="{ r: 0, g: 0, b: 0, a: 1 }">

Gets the current color in RGB(A) format.
  
</PropertyDef>

<PropertyDef name="hsva" type="IHSVA | null" attr={false} defaultValue="{ h: 0, s: 0, v: 0, a: 1 }">

Gets the current color in HSV(A) format.
  
</PropertyDef>

<PropertyDef name="opacity" type="number | null" attr={false} defaultValue="1">

Gets/sets the opacity.
  
</PropertyDef>

<PropertyDef name="debounceChangeEvent" type="boolean" defaultValue="false">

Controls whether the change event is debounced or not. It can be useful to enable this to avoid your change event handler
from being called many times while the user is dragging the canvas handles around.
  
</PropertyDef>

</PageSection>

---

<PageSection>

## Events

| Name                           | Description
| :------------------------------| :----------------
| `forge-color-picker-change`      | Emits when the color value is changed. Event type is `CustomEvent<IColorPickerChangeEventData>`.

</PageSection>

<PageSection>

## Keyboard shortcuts

| Name                                | Description
| :-----------------------------------| :----------------
| `arrow up`                          | Moves thumb position up.
| `arrow right`                       | Moves thumb position right.
| `arrow down`                        | Moves thumb position down.
| `arrow left`                        | Moves thumb position left.

</PageSection>

<PageSection>

## CSS custom properties

| Name                                               | Description
| :--------------------------------------------------| :----------------
| `--forge-color-picker-width`                         | Controls the width of the internal container element.
| `--mdc-theme-text-secondary-on-light`              | Controls the label color.
| `--mdc-theme-icon-on-background`                   | Controls the input color.
| `--mdc-theme-text-primary-on-background`           | Controls the hover color.
| `--mdc-theme-primary`                              | Controls the primary color.

</PageSection>

<PageSection>

## Accessibility

- Verify that you can tab to the hex input field and the “change color format” button.
  - Change the color format to RGBA and HSVA and ensure those input fields are accessible by keyboard.
  - Ensure that there is a visual cue when any of the color value input fields are focused.
- Verify that pressing the space bar or enter key while focusing on the "change color format" button will cycle through the color input formats.

</PageSection>

<PageSection>

## Types

### ColorPickerValueType

```ts
enum ColorPickerValueType {
  HEX = 'hex',
  RGB = 'rgb',
  RGBA = 'rgba',
  HSV = 'hsv',
  HSVA = 'hsva'
}
```

### IRGBA

```ts
interface IRGBA {
  r: number;
  g: number;
  b: number;
  a: number;
}
```

### IHSVA

```ts
interface IHSVA {
  h: number;
  s: number;
  v: number;
  a: number;
}
```

### IColorPickerChangeEventData

```ts
interface IColorPickerChangeEventData {
  type: ColorPickerChangeEventType;
  source: ColorPickerChangeEventSource;
  hex: string;
  rgba: IRGBA;
  hsva: IHSVA;
  alpha?: number;
}
```

### ColorPickerChangeEventType

```ts
export type ColorPickerChangeEventType = 'slider' | 'input';
```

### ColorPickerChangeEventSource

```ts
export type ColorPickerChangeEventSource = 'gradient' | 'hue' | 'opacity' | 'hex' | 'rgba' | 'hsva';
```

</PageSection>
