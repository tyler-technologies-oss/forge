@use 'sass:map';
@use './configuration' as *;
@use './token-utils' as *;
@use './core';
@use '../../focus-indicator';
@use '../../state-layer';
@use '../../tabs/tab-bar';
@use '../../tabs/tab';
@use '../../core/styles/theme';
@use '../../core/styles/tokens/theme/color-emphasis';

//
// Host
//

:host {
  @include host-configuration;
}

:host {
  @include core.host;
}

:host([hidden]) {
  display: none;
}

//
// Default theme
//

:host(:not(theme)) {
  @include theme.provide((
    primary: #{token(foreground)},
    on-primary: rgba(black, color-emphasis.value(highest)),
    text-high: rgba(white, color-emphasis.value(highest)),
    text-medium: rgba(white, color-emphasis.value(medium)),
    text-low: rgba(white, color-emphasis.value(medium-low))
  ));
}

//
// Base
//

.forge-app-bar {
  @include configuration;
}

.forge-app-bar {
  @include core.base;

  .row {
    @include core.row;
  }

  &.no-center {
    .row {
      @include core.row-no-center;
    }
  }

  .section {
    @include core.section;

    &:not(:last-child):not(:first-child) {
      @include core.section-center;
    }

    &:last-child {
      @include core.section-end;
    }
  }

  h1 {
    @include core.title;
  }

  a {
    @include core.anchor-base;

    forge-state-layer {
      @include state-layer.provide-theme((
        color: #{token(foreground)}
      ));
    }

    forge-focus-indicator {
      @include focus-indicator.provide-theme((
        color: #{token(foreground)},
        shape: 4px,
        offset-block: 4px
      ));
    }
  }

  .logo-title-container {
    @include core.logo-title-container;
  }
}

//
// Elevation
//

:host(:is(:not([elevation]),[elevation=raised])) {
  .forge-app-bar {
    @include core.elevation-raised;
  }
}

//
// Slotted - Tab bar
//

::slotted(forge-tab-bar) {
  @include tab-bar.provide-theme(( divider-thickness: 0 ));
}

//
// Slotted - Logo
//

::slotted([slot=logo]) {
  @include core.logo;
}

//
// Slotted - Search
//

::slotted(forge-app-bar-search[slot=center]) {
  width: 100%;
}

//
// White theme
//

:host([theme=white]) {
  @include theme.provide((
    primary: black,
    on-primary: rgba(white, color-emphasis.value(highest)),
    text-medium: rgba(black, color-emphasis.value(medium))
  ));

  .forge-app-bar {
    @include override(background, white, value);
    @include override(foreground, black, value);
  }
}
