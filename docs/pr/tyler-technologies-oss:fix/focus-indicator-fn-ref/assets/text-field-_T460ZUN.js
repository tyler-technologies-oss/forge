import{C as g,l as h,j as E,k as f}from"./constants-DzQy6WDX.js";import{B as L,c as A}from"./base-adapter-C8aSF3nG.js";import"./service-adapter-CffG5Lhq.js";import{t as _,n as y,c as C}from"./feature-detection-B-sRDmdg.js";import{I as T,T as P}from"./icon-kuXwuZAY.js";import{B as a,F as d,a as I,b as F}from"./base-field-BRa6G-O6.js";import"./focus-indicator-D5pdtk5g.js";import{L as O}from"./label-CvyoU-lp.js";import"./index-5CPwzmQS.js";import"./button-syfQPD1X.js";import"./state-layer-gAgMwMHF.js";import"./button-toggle-group-DkGRT_NJ.js";import"./checkbox-BHyV8xNs.js";import{I as S}from"./icon-button-B4X8JNyp.js";import"./switch-BF2vcmHd.js";import{a as B}from"./tooltip-B59ljHGY.js";import"./overlay-B5pGv-rV.js";import{k as N}from"./utils-Bd6MGx91.js";function pt(i,t){let e=t.replace(/\[(\w+)\]/g,".$1");e=e.replace(/^\./,"");const s=e.split(".");for(let r=0;r<s.length;++r){const n=s[r];if(i&&typeof i=="object"&&n in i)i=i[n];else{i="";break}}return i}function _t(i,t){return i.find(e=>v(e,t))}function ut(i,t){if(!i||!i.length)throw new Error("Invalid key");const e={};for(const s of i)if(Object.prototype.hasOwnProperty.call(t,s))e[s]=t[s];else throw new Error(`Invalid key. The property "${s}" does not exist in the data.`);return e}function v(i,t){return Object.keys(t).every(e=>i[e]===t[e])}function x(i,t,e,s){let r=t;t.hasOwnProperty(e)||(r=Object.getPrototypeOf(t));const n=Object.getOwnPropertyDescriptor(r,e);if(!n)throw new Error(`Property ${e} does not exist.`);return Object.defineProperty(t,e,{configurable:!0,get(){return n.get?n.get.apply(this,arguments):void 0},set(){n.set&&n.set.apply(this,arguments),s.apply(i,arguments)}}),()=>Object.defineProperty(t,e,n)}class w extends L{setFieldProperty(t,e){this._fieldElement[t]=e}floatLabelWithoutAnimation(t){this._fieldElement.floatLabelWithoutAnimation(t)}}class V{constructor(t){this._adapter=t,this._labelPosition=a.defaults.DEFAULT_LABEL_POSITION,this._labelAlignment=a.defaults.DEFAULT_LABEL_ALIGNMENT,this._invalid=!1,this._required=!1,this._optional=!1,this._disabled=!1,this._variant=a.defaults.DEFAULT_VARIANT,this._theme=a.defaults.DEFAULT_THEME,this._shape=a.defaults.DEFAULT_SHAPE,this._density=a.defaults.DEFAULT_DENSITY,this._dense=!1,this._popoverIcon=!1,this._popoverExpanded=!1,this._supportTextInset=a.defaults.DEFAULT_SUPPORT_TEXT_INSET,this._permanentlyFloatLabel=!1}get _hasValue(){return this._adapter.hasValue}get _hasPlaceholder(){return this._adapter.hasPlaceholder}click(){this._adapter.click()}applyLabel(t){this._adapter.applyLabel(t)}floatLabelWithoutAnimation(t){this._adapter.floatLabelWithoutAnimation(this._hasValue||this._hasPlaceholder||t)}_tryFloatLabel(t){if(!this._permanentlyFloatLabel){if(this._labelPosition!=="inset"){this._adapter.tryFloatLabel(!1);return}this._adapter.tryFloatLabel(t)}}get labelPosition(){return this._labelPosition}set labelPosition(t){this._labelPosition!==t&&(this._labelPosition=t,this._adapter.setFieldProperty("labelPosition",t),this._adapter.setHostAttribute(a.attributes.LABEL_POSITION,t))}get labelAlignment(){return this._labelAlignment}set labelAlignment(t){this._labelAlignment!==t&&(this._labelAlignment=t,this._adapter.setFieldProperty("labelAlignment",t),this._adapter.setHostAttribute(a.attributes.LABEL_ALIGNMENT,t))}get invalid(){return this._invalid}set invalid(t){this._invalid!==t&&(this._invalid=t,this._adapter.setFieldProperty("invalid",t),this._adapter.toggleHostAttribute(a.attributes.INVALID,t))}get required(){return this._required}set required(t){this._required!==t&&(this._required=t,this._adapter.setFieldProperty("required",t),this._adapter.toggleHostAttribute(a.attributes.REQUIRED,t))}get optional(){return this._optional}set optional(t){this._optional!==t&&(this._optional=t,this._adapter.setFieldProperty("optional",t),this._adapter.toggleHostAttribute(a.attributes.OPTIONAL,t))}get disabled(){return this._disabled}set disabled(t){this._disabled!==t&&(this._disabled=t,this._adapter.setFieldProperty("disabled",t),this._adapter.toggleHostAttribute(a.attributes.DISABLED,t))}get permanentlyFloatLabel(){return this._permanentlyFloatLabel}set permanentlyFloatLabel(t){this._permanentlyFloatLabel!==t&&(this._permanentlyFloatLabel=t,this._adapter.setFieldProperty("floatLabel",t||this._hasValue||this._hasPlaceholder),this._adapter.toggleHostAttribute(a.attributes.FLOAT_LABEL,t))}get variant(){return this._variant}set variant(t){this._variant!==t&&(this._variant=t,this._adapter.setFieldProperty("variant",t),this._adapter.setHostAttribute(a.attributes.VARIANT,t))}get theme(){return this._theme}set theme(t){this._theme!==t&&(this._theme=t,this._adapter.setFieldProperty("theme",t),this._adapter.setHostAttribute(a.attributes.THEME,t))}get shape(){return this._shape}set shape(t){this._shape!==t&&(this._shape=t,this._adapter.setFieldProperty("shape",t),this._adapter.setHostAttribute(a.attributes.SHAPE,t))}get density(){return this._density}set density(t){this._density!==t&&(this._density=t,this._adapter.setFieldProperty("density",t),this._adapter.setHostAttribute(a.attributes.DENSITY,t))}get dense(){return this._dense}set dense(t){this._dense!==t&&(this._dense=t,this._adapter.setFieldProperty("dense",t),this._adapter.toggleHostAttribute(a.attributes.DENSE,t))}get popoverIcon(){return this._popoverIcon}set popoverIcon(t){this._popoverIcon!==t&&(this._popoverIcon=t,this._adapter.setFieldProperty("popoverIcon",t),this._adapter.toggleHostAttribute(a.attributes.POPOVER_ICON,t))}get popoverExpanded(){return this._popoverExpanded}set popoverExpanded(t){this._popoverExpanded!==t&&(this._popoverExpanded=t,this._adapter.setFieldProperty("popoverExpanded",t))}get supportTextInset(){return this._supportTextInset}set supportTextInset(t){this._supportTextInset!==t&&(this._supportTextInset=t,this._adapter.setFieldProperty("supportTextInset",t),this._adapter.setHostAttribute(a.attributes.SUPPORT_TEXT_INSET,t))}}const u=`${g}text-field`,c={SHOW_CLEAR:"show-clear"},D={...c},R={FIELD:"#field",DEFAULT_SLOT:"slot:not([name])",LABEL_SLOT:"slot[name=label]",CLEAR_BUTTON_SLOT:"slot[name=clear-button]",FORGE_LABEL:O.elementName,INPUT:":where(input:not([type=button], [type=checkbox], [type=color], [type=hidden], [type=image], [type=radio], [type=range], [type=reset], [type=submit]), textarea)"},H=["disabled","placeholder"],k={TEXTAREA:"TEXTAREA",LABEL:"LABEL"},U={CLEAR:`${u}-clear`},o={elementName:u,observedAttributes:c,attributes:D,selectors:R,observedInputAttributes:H,tagNames:k,events:U};class M extends w{constructor(t){super(t),this._inputElements=[],this._destroyValueChangerListeners=[],this._fieldElement=h(t,o.selectors.FIELD),this._clearButtonSlotElement=h(t,o.selectors.CLEAR_BUTTON_SLOT),this._defaultSlotElement=h(t,o.selectors.DEFAULT_SLOT),this._labelSlotElement=h(t,o.selectors.LABEL_SLOT),this._fieldElement.setAttribute("exportparts",Object.values(d.parts).join(", ")),this._clearButtonSlotElement.remove()}get hasValue(){return this._inputElements.some(t=>!!t.value)}get hasPlaceholder(){return this._inputElements.some(t=>!!t.placeholder)}get popoverTargetElement(){return this._popoverTargetElement||(this._popoverTargetElement=h(this._fieldElement,d.selectors.POPOVER_TARGET)),this._popoverTargetElement}addRootListener(t,e){this._fieldElement.addEventListener(t,e)}removeRootListener(t,e){this._fieldElement.removeEventListener(t,e)}disableInput(t){this._inputElements.forEach(e=>e.disabled=t)}setInvalid(t){this._inputElements.forEach(e=>_(e,t,"aria-invalid","true"))}inputIsDisabled(){return this._inputElements.some(t=>t.disabled)}click(){this._inputElements[0]?.focus()}applyLabel(t){this._inputElements.forEach(e=>{_(e,!!t,"aria-label",t??"")})}handleDefaultSlotChange(t){this._inputMutationObserver?.disconnect();const e=this._defaultSlotElement.assignedElements();e.length&&(this._inputElements=e.filter(s=>s.matches(o.selectors.INPUT)),this._fieldElement.multiline=this._inputElements.some(s=>s.tagName===o.tagNames.TEXTAREA),this._inputMutationObserver=new MutationObserver(s=>{s.forEach(r=>{if(r.attributeName){const l=r.target.getAttribute(r.attributeName),m=r.attributeName;t(m,l)}})}),this._inputElements.forEach(s=>{this._inputMutationObserver?.observe(s,{attributes:!0,attributeFilter:[...o.observedInputAttributes]}),this._component.disabled&&(s.disabled=!0),Object.values(o.observedInputAttributes).forEach(r=>{const n=r;t(n,s.getAttribute(n))})}))}tryAddValueChangeListener(t,e){this._destroyValueChangerListeners.forEach(s=>s()),this._destroyValueChangerListeners=this._inputElements.map(s=>x(t,s,"value",e))}removeValueChangeListener(){this._destroyValueChangerListeners.forEach(t=>t())}tryFloatLabel(t){if(t!==void 0){this._fieldElement.floatLabel=t;return}this._fieldElement.floatLabel=this.hasValue||this.hasPlaceholder}tryConnectSlottedLabel(){if(this._inputElements.length!==1||this._inputElements[0].labels?.length)return;const t=this._inputElements[0],e=this._labelSlotElement.assignedElements({flatten:!0}),s=e.find(l=>l.matches(o.selectors.FORGE_LABEL));if(s){s.forElement=this._component,s.clickTarget=t;return}const r=e.find(l=>l.tagName===o.tagNames.LABEL);if(!r||r.control)return;const n=t.id||`forge-input-${y()}`;t.id=n,r.htmlFor=n}connectClearButton(t){this._clearButtonSlotElement.addEventListener("click",t)}disconnectClearButton(t){this._clearButtonSlotElement.removeEventListener("click",t)}toggleClearButtonVisibility(t){t?this._fieldElement.append(this._clearButtonSlotElement):this._clearButtonSlotElement.remove()}clearInput(){this._inputElements.length&&(this._inputElements.forEach(t=>{t.value="",t.dispatchEvent(new Event("input"))}),this._inputElements[0].focus())}getAllSlotElements(){return Array.from(this._component.shadowRoot?.querySelectorAll("slot")??[])}}class q extends V{constructor(t){super(t),this._adapter=t,this._showClear=!1,this._slotChangeListener=this._onSlotChange.bind(this),this._inputAttributeListener=this._onInputAttributeChange.bind(this),this._valueChangeListener=this._onValueChange.bind(this),this._inputListener=this._onInputChange.bind(this),this._clearButtonClickListener=e=>this._onClearButtonClick(e)}initialize(){this._adapter.tryApplyGlobalConfiguration(["labelPosition","variant"]),this._adapter.addRootListener("slotchange",this._slotChangeListener),this._adapter.addRootListener("input",this._inputListener),this._initializeSlots()}destroy(){this._adapter.removeRootListener("slotchange",this._slotChangeListener),this._adapter.removeRootListener("input",this._inputListener),this._adapter.removeValueChangeListener()}get popoverTargetElement(){return this._adapter.popoverTargetElement}_initializeSlots(){this._adapter.getAllSlotElements().forEach(t=>this._handleSlotChange(t.name))}_onSlotChange(t){const e=t.target;this._handleSlotChange(e.name)}_handleSlotChange(t){switch(t){case"label":this._adapter.tryConnectSlottedLabel();break;case"":this._adapter.handleDefaultSlotChange(this._inputAttributeListener),this._adapter.tryAddValueChangeListener(this,this._valueChangeListener),this._tryFloatLabel();break}}_onInputAttributeChange(t,e){switch(t){case"disabled":this.disabled=e!==null;break;case"placeholder":this._tryFloatLabel();break}}_onClearButtonClick(t){const e=new CustomEvent(o.events.CLEAR,{bubbles:!0,cancelable:!0,composed:!0});this._adapter.dispatchHostEvent(e),e.defaultPrevented||this._adapter.clearInput()}_onInputChange(t){let e;N(t,InputEvent.name)&&t.target.type==="number"&&(t.data!=null||t.target.validity.badInput)&&(e=!0),this._syncValueChange({floatLabel:e})}_onValueChange(){this._syncValueChange()}_syncValueChange({floatLabel:t=void 0}={}){this._tryFloatLabel(t),this._toggleClearButtonVisibility()}_toggleClearButtonVisibility(){this._adapter.toggleClearButtonVisibility(this._showClear&&this._hasValue&&!this.disabled)}get showClear(){return this._showClear}set showClear(t){this._showClear!==t&&(this._showClear=t,this._adapter.toggleHostAttribute(o.attributes.SHOW_CLEAR,t),t?this._adapter.connectClearButton(this._clearButtonClickListener):this._adapter.disconnectClearButton(this._clearButtonClickListener),this._toggleClearButtonVisibility())}get invalid(){return super.invalid}set invalid(t){super.invalid=t,this._adapter.setInvalid(t)}get disabled(){return super.disabled}set disabled(t){this._disabled!==t&&(this._disabled=t,this._adapter.toggleHostAttribute(d.attributes.DISABLED,t),this._adapter.setFieldProperty("disabled",t),this._adapter.disableInput(t),this._toggleClearButtonVisibility())}get labelPosition(){return super.labelPosition}set labelPosition(t){this._labelPosition!==t&&(this._labelPosition=t,this._adapter.toggleHostAttribute(d.attributes.LABEL_POSITION,!0,t),this._adapter.setFieldProperty("labelPosition",t),this._tryFloatLabel())}}const W=`<template>
  <forge-field id="field">
    <slot slot="label" name="label"></slot>
    <slot slot="start" name="start"></slot>
    <slot></slot>
    <slot slot="end" name="end"></slot>
    <slot slot="end" name="clear-button">
      <forge-icon-button tabindex="-1" dense>
        <forge-icon name="clear"></forge-icon>
      </forge-icon-button>
      <forge-tooltip type="label">
        <slot name="clear-button-tooltip">Clear</slot>
      </forge-tooltip>
    </slot>
    <slot slot="accessory" name="accessory"></slot>
    <slot slot="support-text" name="support-text"></slot>
    <slot slot="support-text-end" name="support-text-end"></slot>

    <!-- Include deprecated leading alias -->
    <slot slot="start" name="leading"></slot>
    <!-- Include deprecated trailing alias -->
    <slot slot="end" name="trailing"></slot>
    <!-- Include deprecated addon-end alias -->
    <slot slot="accessory" name="addon-end"></slot>
    <!-- Include deprecated helper-text alias -->
    <slot slot="support-text" name="helper-text"></slot>
  </forge-field>
</template>
`,X=":host{display:block}:host([hidden]){display:none}forge-field{display:contents}";var j=Object.defineProperty,G=Object.getOwnPropertyDescriptor,b=(i,t,e,s)=>{for(var r=s>1?void 0:s?G(t,e):t,n=i.length-1,l;n>=0;n--)(l=i[n])&&(r=(s?l(t,e,r):l(r))||r);return s&&r&&j(t,e,r),r};let p=class extends F{static get observedAttributes(){return[...Object.values(a.observedAttributes),...Object.values(o.observedAttributes)]}constructor(){super(),f(this,W,X),this._core=new q(new M(this)),T.define(P)}connectedCallback(){this._core.initialize()}disconnectedCallback(){this._core.destroy()}attributeChangedCallback(i,t,e){switch(super.attributeChangedCallback(i,t,e),i){case o.attributes.SHOW_CLEAR:this.showClear=C(e);break}}get popoverTargetElement(){return this._core.popoverTargetElement}};b([A()],p.prototype,"showClear",2);p=b([E({name:o.elementName,dependencies:[I,S,B]})],p);export{w as B,o as T,V as a,p as b,ut as c,_t as f,pt as g,x as l,v as m};
