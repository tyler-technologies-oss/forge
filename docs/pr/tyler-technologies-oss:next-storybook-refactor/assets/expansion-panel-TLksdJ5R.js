import{C as g,x as c,v as E,B as N,w as u,h as b}from"./constants-DTwaRlry.js";import{B as T,F as h}from"./base-adapter-BrqXnkkD.js";import{O as m}from"./open-icon-cgpobDUq.js";const l=`${g}expansion-panel`,_={OPEN:"open",ORIENTATION:"orientation",ANIMATION_TYPE:"animation-type"},f={..._,OPENING:"opening"},O={HIDDEN:"hidden"},y={HEADER:".header",CONTENT:".content",IGNORE:":is([data-forge-ignore],[forge-ignore])",OPEN_ICON:`:is([slot=header] ${m.elementName}, ${m.elementName}[slot^=header])`},v={TOGGLE:`${l}-toggle`,ANIMATION_COMPLETE:`${l}-animation-complete`},e={elementName:l,observedAttributes:_,attributes:f,classes:O,selectors:y,events:v};class A extends T{constructor(t){super(t),this._transitionStartListener=this._onTransitionStart.bind(this),this._transitionEndListener=this._onTransitionEnd.bind(this),this._headerElement=c(this._component,e.selectors.HEADER),this._contentElement=c(this._component,e.selectors.CONTENT)}setAnimationCompleteListener(t){this._transitionCompleteListener=t,this._contentElement.addEventListener("transitionstart",this._transitionStartListener),this._contentElement.addEventListener("transitionend",this._transitionEndListener)}addHeaderListener(t,n){this._headerElement.addEventListener(t,n)}tryToggleOpenIcon(t){const n=this._component.querySelector(e.selectors.OPEN_ICON);n&&(n.open=t)}setContentVisibility(t){this._contentElement.classList.toggle(e.classes.HIDDEN,!t)}_onTransitionStart(t){t.propertyName.startsWith("grid-template")&&this.toggleHostAttribute(e.attributes.OPENING,!0)}_onTransitionEnd(t){t.propertyName.startsWith("grid-template")&&(this.toggleHostAttribute(e.attributes.OPENING,!1),this._transitionCompleteListener())}}class C{constructor(t){this._adapter=t,this._open=!1,this._orientation="vertical",this._animationType="default",this._clickListener=this._onClick.bind(this),this._keydownListener=this._onKeydown.bind(this),this._animationCompleteListener=this._onAnimationComplete.bind(this)}initialize(){this._adapter.addHeaderListener("click",this._clickListener),this._adapter.addHeaderListener("keydown",this._keydownListener),this._adapter.setAnimationCompleteListener(this._animationCompleteListener)}_onClick(t){t.composedPath().find(i=>i.nodeType===Node.ELEMENT_NODE&&i.matches(e.selectors.IGNORE))||(t.stopPropagation(),this._toggle(),this._dispatchToggleEvent())}_onKeydown(t){(t.key===" "||t.key==="Enter")&&(t.stopPropagation(),t.preventDefault(),this._toggle(),this._dispatchToggleEvent())}_onAnimationComplete(){this._open||this._adapter.setContentVisibility(!1),this._adapter.dispatchHostEvent(new CustomEvent(e.events.ANIMATION_COMPLETE,{detail:this._open}))}_togglePanel(){this._adapter.toggleHostAttribute(e.attributes.OPEN,this._open),this._adapter.tryToggleOpenIcon(this._open),this._open&&this._adapter.setContentVisibility(!0)}_dispatchToggleEvent(){const t=new CustomEvent(e.events.TOGGLE,{detail:this._open,bubbles:!0,composed:!0});this._adapter.dispatchHostEvent(t)}_toggle(){this.open=!this.open}get open(){return this._open}set open(t){t=!!t,this._open!==t&&(this._open=t,this._togglePanel())}get orientation(){return this._orientation}set orientation(t){this._orientation!==t&&(this._orientation=t,this._adapter.setHostAttribute(e.attributes.ORIENTATION,this._orientation))}get animationType(){return this._animationType}set animationType(t){this._animationType!==t&&(this._animationType=t,this._adapter.setHostAttribute(e.attributes.ANIMATION_TYPE,this._animationType))}}const I=`<template>
  <div class="forge-expansion-panel" part="root">
    <div class="header" part="header">
      <slot name="header"></slot>
    </div>
    <div class="content hidden" part="content">
      <div class="inner">
        <slot></slot>
      </div>
    </div>
  </div>
</template>`,P=":host{display:block}:host([hidden]){display:none}.forge-expansion-panel{--_expansion-panel-animation-duration: var(--forge-expansion-panel-animation-duration, var(--forge-animation-duration-medium4, .4s));--_expansion-panel-animation-easing: var(--forge-expansion-panel-animation-easing, var(--forge-animation-easing-standard, cubic-bezier(.2, 0, 0, 1)))}.header{outline:none;-webkit-tap-highlight-color:transparent;cursor:pointer}.content{display:grid;grid-template-rows:0fr;transition-property:opacity,grid-template-rows;transition-duration:var(--_expansion-panel-animation-duration);transition-timing-function:var(--_expansion-panel-animation-easing);min-height:0;overflow:hidden;opacity:0}.content .inner{display:grid;grid-template-rows:1fr;overflow:hidden}.hidden{visibility:hidden}@media (prefers-reduced-motion: reduce){.content{transition:none}}:host([open]) .content{opacity:1}:host([open]:is(:not([orientation]),[orientation=vertical])) .content{grid-template-rows:1fr}:host([open][orientation=horizontal]) .content{grid-template-columns:1fr}:host([orientation=horizontal]) .forge-expansion-panel{display:grid;grid-template-columns:auto 1fr}:host([orientation=horizontal]) .content{transition-property:opacity,grid-template-columns;grid-template-rows:none;grid-template-columns:0fr}:host([animation-type=none]) .content{transition:none}";var L=Object.defineProperty,w=Object.getOwnPropertyDescriptor,r=(s,t,n,i)=>{for(var o=i>1?void 0:i?w(t,n):t,p=s.length-1,d;p>=0;p--)(d=s[p])&&(o=(i?d(t,n,o):d(o))||o);return i&&o&&L(t,n,o),o};let a=class extends N{static get observedAttributes(){return Object.values(e.observedAttributes)}constructor(){super(),u(this,I,P),this._foundation=new C(new A(this))}connectedCallback(){this._foundation.initialize()}attributeChangedCallback(s,t,n){switch(s){case e.observedAttributes.OPEN:this.open=b(n);break;case e.observedAttributes.ORIENTATION:this.orientation=n;break;case e.observedAttributes.ANIMATION_TYPE:this.animationType=n;break}}toggle(){this.open=!this.open}};r([h()],a.prototype,"open",2);r([h()],a.prototype,"orientation",2);r([h()],a.prototype,"animationType",2);a=r([E({name:e.elementName})],a);export{e as E,a};
