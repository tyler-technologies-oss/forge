import{i as g}from"./index-CsmkSriH.js";import{F as d,a as E,B as f,b as C}from"./base-field-B2EYpsqa.js";import"./focus-indicator-f9GJik4v.js";import"./index-Dh0vMUMR.js";import{L}from"./label-CyT64Z98.js";import"./button-DW0aIXKQ.js";import"./state-layer-CvtwhWgg.js";import"./checkbox-D__IHhAJ.js";import{I as A}from"./icon-button-DFQDfzrF.js";import{I as v}from"./icon-DvTdPf-7.js";import"./switch-K7T10jln.js";import{a as y}from"./tooltip-QHNUkaAT.js";import"./overlay-g_05lOO3.js";import{B as T,a as B}from"./base-field-foundation-DJFlSb2V.js";import{C as O,x as u,t as I,E as S,v as F,w as N,h as P}from"./constants-Ds_Uvk97.js";import{l as w}from"./object-utils-BVOUzLua.js";import{F as R}from"./base-adapter-BevgLcPl.js";const c=`${O}text-field`,m={SHOW_CLEAR:"show-clear"},x={...m},V={FIELD:"#field",CLEAR_BUTTON_SLOT:"slot[name=clear-button]",FORGE_LABEL:L.elementName,INPUT:":where(input:not([type=button], [type=checkbox], [type=color], [type=hidden], [type=image], [type=radio], [type=range], [type=reset], [type=submit]), textarea)"},k=["disabled","placeholder"],D={TEXTAREA:"TEXTAREA",LABEL:"LABEL"},j={CLEAR:`${c}-clear`},o={elementName:c,observedAttributes:m,attributes:x,selectors:V,observedInputAttributes:k,tagNames:D,events:j};class H extends T{constructor(t){super(t),this._inputElements=[],this._destroyValueChangerListeners=[],this._fieldElement=u(t,o.selectors.FIELD),this._clearButtonSlotElement=u(t,o.selectors.CLEAR_BUTTON_SLOT),this._fieldElement.setAttribute("exportparts",Object.values(d.parts).join(", ")),this._clearButtonSlotElement.remove()}get hasValue(){return this._inputElements.some(t=>!!t.value)}get hasPlaceholder(){return this._inputElements.some(t=>!!t.placeholder)}get popoverTargetElement(){return this._popoverTargetElement||(this._popoverTargetElement=u(this._fieldElement,d.selectors.POPOVER_TARGET)),this._popoverTargetElement}addRootListener(t,e){this._fieldElement.addEventListener(t,e)}removeRootListener(t,e){this._fieldElement.removeEventListener(t,e)}disableInput(t){this._inputElements.forEach(e=>e.disabled=t)}inputIsDisabled(){return this._inputElements.some(t=>t.disabled)}click(){var t;(t=this._inputElements[0])==null||t.focus()}applyLabel(t){this._inputElements.forEach(e=>{I(e,!!t,"aria-label",t??"")})}handleDefaultSlotChange(t,e){var n;(n=this._inputMutationObserver)==null||n.disconnect();const i=t.assignedElements();i.length&&(this._inputElements=i.filter(s=>s.matches(o.selectors.INPUT)),this._fieldElement.multiline=this._inputElements.some(s=>s.tagName===o.tagNames.TEXTAREA),this._inputMutationObserver=new MutationObserver(s=>{s.forEach(a=>{if(a.attributeName){const r=a.target.getAttribute(a.attributeName),b=a.attributeName;e(b,r)}})}),this._inputElements.forEach(s=>{var a;(a=this._inputMutationObserver)==null||a.observe(s,{attributes:!0,attributeFilter:[...o.observedInputAttributes]}),this._component.disabled&&(s.disabled=!0),Object.values(o.observedInputAttributes).forEach(h=>{const r=h;e(r,s.getAttribute(r))})}))}tryAddValueChangeListener(t,e){this._destroyValueChangerListeners.forEach(i=>i()),this._destroyValueChangerListeners=this._inputElements.map(i=>w(t,i,"value",e))}removeValueChangeListener(){this._destroyValueChangerListeners.forEach(t=>t())}tryFloatLabel(t){if(t!==void 0){this._fieldElement.floatLabel=t;return}this._fieldElement.floatLabel=this.hasValue||this.hasPlaceholder}tryConnectSlottedLabel(t){var h;if(this._inputElements.length!==1||(h=this._inputElements[0].labels)!=null&&h.length)return;const e=this._inputElements[0],i=t.assignedElements({flatten:!0}),n=i.find(r=>r.matches(o.selectors.FORGE_LABEL));if(n){n.forElement=this._component,n.clickTarget=e;return}const s=i.find(r=>r.tagName===o.tagNames.LABEL);if(!s||s.control)return;const a=e.id||`forge-input-${S()}`;e.id=a,s.htmlFor=a}connectClearButton(t){this._clearButtonSlotElement.addEventListener("click",t)}disconnectClearButton(t){this._clearButtonSlotElement.removeEventListener("click",t)}toggleClearButtonVisibility(t){t?this._fieldElement.append(this._clearButtonSlotElement):this._clearButtonSlotElement.remove()}clearInput(){this._inputElements.length&&(this._inputElements.forEach(t=>t.value=""),this._inputElements[0].focus())}}class M extends B{constructor(t){super(t),this._adapter=t,this._showClear=!1,this._slotChangeListener=this._onSlotChange.bind(this),this._inputAttributeListener=this._onInputAttributeChange.bind(this),this._valueChangeListener=this._onValueChange.bind(this),this._inputListener=this._onValueChange.bind(this),this._clearButtonClickListener=e=>this._onClearButtonClick(e)}initialize(){this._adapter.tryApplyGlobalConfiguration(["labelPosition"]),this._adapter.addRootListener("slotchange",this._slotChangeListener),this._adapter.addRootListener("input",this._inputListener)}disconnect(){this._adapter.removeRootListener("slotchange",this._slotChangeListener),this._adapter.removeRootListener("input",this._inputListener),this._adapter.removeValueChangeListener()}get popoverTargetElement(){return this._adapter.popoverTargetElement}_onSlotChange(t){const e=t.target;switch(e.name){case"label":this._adapter.tryConnectSlottedLabel(e);break;case"":this._adapter.handleDefaultSlotChange(e,this._inputAttributeListener),this._adapter.tryAddValueChangeListener(this,this._valueChangeListener),this._tryFloatLabel();break}}_onInputAttributeChange(t,e){switch(t){case"disabled":this.disabled=e!==null;break;case"placeholder":this._tryFloatLabel();break}}_onClearButtonClick(t){const e=new CustomEvent(o.events.CLEAR,{bubbles:!0,cancelable:!0,composed:!0});this._adapter.dispatchHostEvent(e),e.defaultPrevented||this._adapter.clearInput()}_onValueChange(){this._tryFloatLabel(),this._toggleClearButtonVisibility()}_toggleClearButtonVisibility(){this._adapter.toggleClearButtonVisibility(this._showClear&&this._hasValue&&!this.disabled)}get showClear(){return this._showClear}set showClear(t){this._showClear!==t&&(this._showClear=t,this._adapter.toggleHostAttribute(o.attributes.SHOW_CLEAR,t),t?this._adapter.connectClearButton(this._clearButtonClickListener):this._adapter.disconnectClearButton(this._clearButtonClickListener),this._toggleClearButtonVisibility())}get disabled(){return super.disabled}set disabled(t){this._disabled!==t&&(this._disabled=t,this._adapter.toggleHostAttribute(d.attributes.DISABLED,t),this._adapter.setFieldProperty("disabled",t),this._adapter.disableInput(t),this._toggleClearButtonVisibility())}get labelPosition(){return super.labelPosition}set labelPosition(t){this._labelPosition!==t&&(this._labelPosition=t,this._adapter.toggleHostAttribute(d.attributes.LABEL_POSITION,!0,t),this._adapter.setFieldProperty("labelPosition",t),this._tryFloatLabel())}}const X=`<template>
  <forge-field id="field">
    <slot slot="label" name="label"></slot>
    <slot slot="start" name="start"></slot>
    <slot></slot>
    <slot slot="end" name="end"></slot>
    <slot slot="end" name="clear-button">
      <forge-icon-button tabindex="-1" dense>
        <forge-icon name="clear"></forge-icon>
      </forge-icon-button>
      <forge-tooltip type="label">
        <slot name="clear-button-tooltip">Clear</slot>
      </forge-tooltip>
    </slot>
    <slot slot="accessory" name="accessory"></slot>
    <slot slot="support-text" name="support-text"></slot>
    <slot slot="support-text-end" name="support-text-end"></slot>
    
    <!-- Include deprecated leading alias -->
    <slot slot="start" name="leading"></slot>
    <!-- Include deprecated trailing alias -->
    <slot slot="end" name="trailing"></slot>
    <!-- Include deprecated addon-end alias -->
    <slot slot="accessory" name="addon-end"></slot>
    <!-- Include deprecated helper-text alias -->
    <slot slot="support-text" name="helper-text"></slot>
  </forge-field>
</template>`,G=":host{display:block}:host([hidden]){display:none}forge-field{display:contents}";var U=Object.defineProperty,W=Object.getOwnPropertyDescriptor,_=(l,t,e,i)=>{for(var n=i>1?void 0:i?W(t,e):t,s=l.length-1,a;s>=0;s--)(a=l[s])&&(n=(i?a(t,e,n):a(n))||n);return i&&n&&U(t,e,n),n};let p=class extends E{static get observedAttributes(){return[...Object.values(f.observedAttributes),...Object.values(o.observedAttributes)]}constructor(){super(),N(this,X,G),this._foundation=new M(new H(this)),v.define(g)}connectedCallback(){this._foundation.initialize()}attributeChangedCallback(l,t,e){switch(super.attributeChangedCallback(l,t,e),l){case o.attributes.SHOW_CLEAR:this.showClear=P(e);break}}get popoverTargetElement(){return this._foundation.popoverTargetElement}};_([R()],p.prototype,"showClear",2);p=_([F({name:o.elementName,dependencies:[C,A,y]})],p);export{o as T,p as a};
