import{B as _,F as b}from"./base-adapter-BMKBy0c-.js";import"./index-Dh0vMUMR.js";import{F as c,a as p}from"./focus-indicator-wpKDCgcD.js";import{S as m,a as f}from"./state-layer-5aAa94dU.js";import{C as L,F as n,D as g,E,l as S}from"./constants-DsWS7qYA.js";import{g as v}from"./event-utils-C1SDeUaq.js";const O=`${L}button-area`,y={DISABLED:"disabled",IGNORE:"data-forge-ignore",IGNORE_ALT:"forge-ignore"},l={ROOT:"root",BUTTON_SLOT:"button",CONTENT_SLOT:"content"},T={ROOT:"forge-button-area"},B={ROOT:`#${l.ROOT}`,BUTTON_SLOT:"slot[name=button]",CONTENT_SLOT:`#${l.CONTENT_SLOT}`},o={elementName:O,attributes:y,ids:l,classes:T,selectors:B};class w extends _{constructor(t){super(t),this._rootElement=n(t,o.selectors.ROOT),this._buttonSlotElement=n(t,o.selectors.BUTTON_SLOT),this._contentSlotElement=n(t,o.selectors.CONTENT_SLOT),this._focusIndicatorElement=n(t,c.elementName),this._stateLayerElement=n(t,m.elementName)}destroy(){}setDisabled(t){var e;(e=this._buttonElement)==null||e.toggleAttribute(o.attributes.DISABLED,t),t?(this._focusIndicatorElement.remove(),this._stateLayerElement.remove()):this._rootElement.append(this._focusIndicatorElement,this._stateLayerElement)}addListener(t,e,r){this._rootElement.addEventListener(t,e,{capture:r})}removeListener(t,e,r){this._rootElement.removeEventListener(t,e,{capture:r})}addButtonSlotListener(t,e){this._buttonSlotElement.addEventListener(t,e)}removeButtonSlotListener(t,e){this._buttonSlotElement.removeEventListener(t,e)}addContentSlotListener(t,e){this._contentSlotElement.addEventListener(t,e)}removeContentSlotListener(t,e){this._contentSlotElement.removeEventListener(t,e)}animateStateLayer(){this._stateLayerElement.playAnimation()}startButtonObserver(t){this._buttonElement&&(this._buttonObserver=new MutationObserver(t),this._buttonObserver.observe(this._buttonElement,{attributeFilter:[o.attributes.DISABLED]}))}stopButtonObserver(){this._buttonObserver&&(this._buttonObserver.disconnect(),this._buttonObserver=void 0)}detectSlottedButton(){this._buttonElement=this._buttonSlotElement.assignedElements()[0]}isButtonDisabled(){var t;return((t=this._buttonElement)==null?void 0:t.disabled)??!0}requestDisabledButtonFrame(){this._buttonElement&&(this._buttonElement.disabled=!0,requestAnimationFrame(()=>this._buttonElement.disabled=!1))}}class C{constructor(t){this._adapter=t,this._disabled=!1,this._clickListener=this._handleClick.bind(this),this._keydownListener=this._handleKeydown.bind(this),this._pointerdownListener=this._handlePointerdown.bind(this),this._ignoreStateLayerListener=this._handleIgnoreStateLayer.bind(this),this._slotListener=this._handleSlotChange.bind(this)}initialize(){this._adapter.addListener("click",this._clickListener),this._adapter.addListener("keydown",this._keydownListener),this._adapter.addListener("pointerdown",this._pointerdownListener),this._adapter.addContentSlotListener("click",this._ignoreStateLayerListener.bind(this)),this._adapter.addContentSlotListener("pointerdown",this._ignoreStateLayerListener.bind(this)),this._adapter.addContentSlotListener("pointerup",this._ignoreStateLayerListener.bind(this)),this._adapter.addButtonSlotListener("slotchange",this._slotListener)}disconnect(){this._adapter.removeListener("click",this._clickListener),this._adapter.removeListener("keydown",this._keydownListener),this._adapter.removeListener("pointerdown",this._pointerdownListener),this._adapter.removeContentSlotListener("click",this._ignoreStateLayerListener.bind(this)),this._adapter.removeContentSlotListener("pointerdown",this._ignoreStateLayerListener.bind(this)),this._adapter.removeContentSlotListener("pointerup",this._ignoreStateLayerListener.bind(this)),this._adapter.removeButtonSlotListener("slotchange",this._slotListener),this._adapter.destroy(),this._adapter.stopButtonObserver()}_handleClick(t){this._disabled&&t.stopPropagation();const e=window.getSelection();(e==null?void 0:e.type)==="Range"&&(e==null?void 0:e.toString().trim())!==""&&t.stopPropagation(),this._shouldIgnoreEvent(t)&&t.stopPropagation()}_handleKeydown(t){t.key!==" "&&t.key!=="Enter"||(this._shouldIgnoreEvent(t)?t.stopPropagation():this._adapter.animateStateLayer())}_handlePointerdown(t){this._disabled||this._shouldIgnoreEvent(t)&&this._adapter.requestDisabledButtonFrame()}_handleIgnoreStateLayer(t){this._disabled||this._shouldIgnoreEvent(t)&&t.stopPropagation()}_handleSlotChange(){this._adapter.stopButtonObserver(),this._adapter.detectSlottedButton(),this._adapter.startButtonObserver(()=>this._handleButtonDisabled()),this._adapter.isButtonDisabled()?this.disabled=!0:this._disabled&&this._adapter.setDisabled(!0)}_handleButtonDisabled(){this.disabled=this._adapter.isButtonDisabled()}_shouldIgnoreEvent(t){return v(t).some(r=>r.nodeType===1&&(r.hasAttribute(o.attributes.IGNORE)||r.hasAttribute(o.attributes.IGNORE_ALT)))}get disabled(){return this._disabled}set disabled(t){this._disabled!==t&&(this._disabled=t,this._adapter.setDisabled(this._disabled),this._adapter.toggleHostAttribute(o.attributes.DISABLED,this._disabled))}}const N=`<template>
  <div class="forge-button-area" id="root" part="root">
    <div class="button" id="button" part="button">
      <slot name="button"></slot>
    </div>
    <slot id="content"></slot>
    <forge-state-layer target="root" exportparts="surface:state-layer"></forge-state-layer>
    <forge-focus-indicator target="button" part="focus-indicator" inward></forge-focus-indicator>
  </div>
</template>`,A=":host{display:block;position:relative}:host .forge-button-area{cursor:var(--_button-area-cursor)}:host([hidden]){display:none}:host([disabled]) .forge-button-area{cursor:var(--_button-area-disabled-cursor)}.forge-button-area{--_button-area-primary-color: var(--forge-button-area-primary-color, var(--forge-theme-primary, #3f51b5));--_button-area-cursor: var(--forge-button-area-cursor, pointer);--_button-area-disabled-cursor: var(--forge-button-area-disabled-cursor, not-allowed);--_button-area-focus-indicator-color: var(--forge-button-area-focus-indicator-color, var(--forge-theme-primary, #3f51b5));--_button-area-focus-indicator-offset: var(--forge-button-area-focus-indicator-offset, 4px)}.forge-button-area{position:relative;overflow:hidden}.forge-button-area .button{border:0;clip:rect(0 0 0 0);height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute;width:1px;outline:0;-webkit-appearance:none;-moz-appearance:none}forge-focus-indicator{z-index:1;--forge-focus-indicator-color: var(--_button-area-focus-indicator-color);--forge-focus-indicator-outward-offset: var(--_button-area-focus-indicator-offset)}forge-state-layer{--forge-state-layer-color: var(--_button-area-primary-color);border-radius:inherit}";var D=Object.defineProperty,I=Object.getOwnPropertyDescriptor,u=(i,t,e,r)=>{for(var s=r>1?void 0:r?I(t,e):t,a=i.length-1,d;a>=0;a--)(d=i[a])&&(s=(r?d(t,e,s):d(s))||s);return r&&s&&D(t,e,s),s};let h=class extends HTMLElement{static get observedAttributes(){return[o.attributes.DISABLED]}constructor(){super(),E(this,N,A),this._foundation=new C(new w(this))}connectedCallback(){this._foundation.initialize()}disconnectedCallback(){this._foundation.disconnect()}attributeChangedCallback(i,t,e){switch(i){case o.attributes.DISABLED:this.disabled=S(e);break}}};u([b()],h.prototype,"disabled",2);h=u([g({name:o.elementName,dependencies:[p,f]})],h);
