import{C as f,x as n,v as g,w as L,h as E,c as S,g as v}from"./constants-BUdimubM.js";import{B as O,F as y}from"./base-adapter-BD--ltDq.js";import"./index-Dh0vMUMR.js";import{F as T,a as B}from"./focus-indicator-Cg33mmfZ.js";import{S as w,a as C}from"./state-layer-C7V9cEd6.js";import{g as A}from"./event-utils-C1SDeUaq.js";const N=`${f}button-area`,D={DISABLED:"disabled",IGNORE:"data-forge-ignore",IGNORE_ALT:"forge-ignore"},u={ROOT:"root",BUTTON_SLOT:"button",CONTENT_SLOT:"content"},I={ROOT:"forge-button-area"},P={ROOT:`#${u.ROOT}`,BUTTON_SLOT:"slot[name=button]",CONTENT_SLOT:`#${u.CONTENT_SLOT}`},o={elementName:N,attributes:D,ids:u,classes:I,selectors:P};class k extends O{constructor(t){super(t),this._rootElement=n(t,o.selectors.ROOT),this._buttonSlotElement=n(t,o.selectors.BUTTON_SLOT),this._contentSlotElement=n(t,o.selectors.CONTENT_SLOT),this._focusIndicatorElement=n(t,T.elementName),this._stateLayerElement=n(t,w.elementName)}destroy(){}setDisabled(t){var e;(e=this._buttonElement)==null||e.toggleAttribute(o.attributes.DISABLED,t),t?(this._focusIndicatorElement.remove(),this._stateLayerElement.remove()):this._rootElement.append(this._focusIndicatorElement,this._stateLayerElement)}addListener(t,e,r){this._rootElement.addEventListener(t,e,{capture:r})}removeListener(t,e,r){this._rootElement.removeEventListener(t,e,{capture:r})}addButtonSlotListener(t,e){this._buttonSlotElement.addEventListener(t,e)}removeButtonSlotListener(t,e){this._buttonSlotElement.removeEventListener(t,e)}addContentSlotListener(t,e){this._contentSlotElement.addEventListener(t,e)}removeContentSlotListener(t,e){this._contentSlotElement.removeEventListener(t,e)}animateStateLayer(){this._stateLayerElement.playAnimation()}startButtonObserver(t){this._buttonElement&&(this._buttonObserver=new MutationObserver(t),this._buttonObserver.observe(this._buttonElement,{attributeFilter:[o.attributes.DISABLED]}))}stopButtonObserver(){this._buttonObserver&&(this._buttonObserver.disconnect(),this._buttonObserver=void 0)}detectSlottedButton(){this._buttonElement=this._buttonSlotElement.assignedElements()[0]}isButtonDisabled(){var t;return((t=this._buttonElement)==null?void 0:t.disabled)??!0}requestDisabledButtonFrame(){this._buttonElement&&(this._buttonElement.disabled=!0,requestAnimationFrame(()=>this._buttonElement.disabled=!1))}}class R{constructor(t){this._adapter=t,this._disabled=!1,this._clickListener=this._handleClick.bind(this),this._keydownListener=this._handleKeydown.bind(this),this._pointerdownListener=this._handlePointerdown.bind(this),this._ignoreStateLayerListener=this._handleIgnoreStateLayer.bind(this),this._slotListener=this._handleSlotChange.bind(this)}initialize(){this._adapter.addListener("click",this._clickListener),this._adapter.addListener("keydown",this._keydownListener),this._adapter.addListener("pointerdown",this._pointerdownListener),this._adapter.addContentSlotListener("click",this._ignoreStateLayerListener.bind(this)),this._adapter.addContentSlotListener("pointerdown",this._ignoreStateLayerListener.bind(this)),this._adapter.addContentSlotListener("pointerup",this._ignoreStateLayerListener.bind(this)),this._adapter.addButtonSlotListener("slotchange",this._slotListener)}disconnect(){this._adapter.removeListener("click",this._clickListener),this._adapter.removeListener("keydown",this._keydownListener),this._adapter.removeListener("pointerdown",this._pointerdownListener),this._adapter.removeContentSlotListener("click",this._ignoreStateLayerListener.bind(this)),this._adapter.removeContentSlotListener("pointerdown",this._ignoreStateLayerListener.bind(this)),this._adapter.removeContentSlotListener("pointerup",this._ignoreStateLayerListener.bind(this)),this._adapter.removeButtonSlotListener("slotchange",this._slotListener),this._adapter.destroy(),this._adapter.stopButtonObserver()}_handleClick(t){this._disabled&&t.stopPropagation();const e=window.getSelection();(e==null?void 0:e.type)==="Range"&&(e==null?void 0:e.toString().trim())!==""&&t.stopPropagation(),this._shouldIgnoreEvent(t)&&t.stopPropagation()}_handleKeydown(t){t.key!==" "&&t.key!=="Enter"||(this._shouldIgnoreEvent(t)?t.stopPropagation():this._adapter.animateStateLayer())}_handlePointerdown(t){this._disabled||this._shouldIgnoreEvent(t)&&this._adapter.requestDisabledButtonFrame()}_handleIgnoreStateLayer(t){this._disabled||this._shouldIgnoreEvent(t)&&t.stopPropagation()}_handleSlotChange(){this._adapter.stopButtonObserver(),this._adapter.detectSlottedButton(),this._adapter.startButtonObserver(()=>this._handleButtonDisabled()),this._adapter.isButtonDisabled()?this.disabled=!0:this._disabled&&this._adapter.setDisabled(!0)}_handleButtonDisabled(){this.disabled=this._adapter.isButtonDisabled()}_shouldIgnoreEvent(t){return A(t).some(r=>r.nodeType===1&&(r.hasAttribute(o.attributes.IGNORE)||r.hasAttribute(o.attributes.IGNORE_ALT)))}get disabled(){return this._disabled}set disabled(t){this._disabled!==t&&(this._disabled=t,this._adapter.setDisabled(this._disabled),this._adapter.toggleHostAttribute(o.attributes.DISABLED,this._disabled))}}const x=`<template>
  <div class="forge-button-area" id="root" part="root">
    <div class="button" id="button" part="button">
      <slot name="button"></slot>
    </div>
    <slot id="content"></slot>
    <forge-state-layer target="root" exportparts="surface:state-layer"></forge-state-layer>
    <forge-focus-indicator target="button" part="focus-indicator" inward></forge-focus-indicator>
  </div>
</template>`,F=":host{display:block;position:relative}:host .forge-button-area{cursor:var(--_button-area-cursor)}:host([hidden]){display:none}:host([disabled]) .forge-button-area{cursor:var(--_button-area-disabled-cursor)}.forge-button-area{--_button-area-primary-color: var(--forge-button-area-primary-color, var(--forge-theme-primary, #3f51b5));--_button-area-cursor: var(--forge-button-area-cursor, pointer);--_button-area-disabled-cursor: var(--forge-button-area-disabled-cursor, not-allowed);--_button-area-focus-indicator-color: var(--forge-button-area-focus-indicator-color, var(--forge-theme-primary, #3f51b5));--_button-area-focus-indicator-offset: var(--forge-button-area-focus-indicator-offset, 4px)}.forge-button-area{position:relative;overflow:hidden}.forge-button-area .button{border:0;clip:rect(0 0 0 0);height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute;width:1px;outline:0;-webkit-appearance:none;-moz-appearance:none}forge-focus-indicator{z-index:1;--forge-focus-indicator-color: var(--_button-area-focus-indicator-color);--forge-focus-indicator-outward-offset: var(--_button-area-focus-indicator-offset)}forge-state-layer{--forge-state-layer-color: var(--_button-area-primary-color);border-radius:inherit}";var z=Object.defineProperty,M=Object.getOwnPropertyDescriptor,m=(s,t,e,r)=>{for(var a=r>1?void 0:r?M(t,e):t,d=s.length-1,l;d>=0;d--)(l=s[d])&&(a=(r?l(t,e,a):l(a))||a);return r&&a&&z(t,e,a),a};let _=class extends HTMLElement{static get observedAttributes(){return[o.attributes.DISABLED]}constructor(){super(),L(this,x,F),this._foundation=new R(new k(this))}connectedCallback(){this._foundation.initialize()}disconnectedCallback(){this._foundation.disconnect()}attributeChangedCallback(s,t,e){switch(s){case o.attributes.DISABLED:this.disabled=E(e);break}}};m([y()],_.prototype,"disabled",2);_=m([g({name:o.elementName,dependencies:[B,C]})],_);const h="forge-button-area",U={title:"Components/ButtonArea",render:s=>S(h,s),component:h,parameters:{actions:{disable:!0}},argTypes:{...v({tagName:h})},args:{}},i={};var b,c,p;i.parameters={...i.parameters,docs:{...(b=i.parameters)==null?void 0:b.docs,source:{originalSource:"{}",...(p=(c=i.parameters)==null?void 0:c.docs)==null?void 0:p.source}}};const j=["Demo"],X=Object.freeze(Object.defineProperty({__proto__:null,Demo:i,__namedExportsOrder:j,default:U},Symbol.toStringTag,{value:"Module"}));export{X as B,i as D};
