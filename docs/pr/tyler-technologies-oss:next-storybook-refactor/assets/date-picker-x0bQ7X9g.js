import{z as h}from"./index-CDQrnaq1.js";import{i as o,C as _}from"./calendar-0MsCIPgi.js";import"./index-Dh0vMUMR.js";import{I as d,a as c}from"./icon-V4IE3JYq.js";import{I as m}from"./icon-button-CZlBA0tM.js";import"./focus-indicator-By3BQe1w.js";import"./state-layer-b0IlkqgO.js";import{P as E}from"./popover-DtkI80cB.js";import"./overlay-BAE6BB-F.js";import{B as f,C as v,D as b,a as C,b as I,c as g}from"./base-date-picker-foundation-DvPz-K2Q.js";import{C as D,F as V,k as A,P as y,G as P,n as k,o as w}from"./constants-C96o6uhb.js";import{l as S}from"./base-field-foundation-BjAPCV1E.js";const l=`${D}date-picker`,T={VALUE:"value"},M={INPUT:"input,input[forge-date-picker-input]"},N={CHANGE:`${l}-change`,OPEN:`${l}-open`,CLOSE:`${l}-close`,INPUT:`${l}-input`},a={elementName:l,selectors:M,events:N,observedAttributes:T};class O extends f{constructor(t){super(t),this._dropdownIdentifier=`forge-date-picker-${this._identifier}`}_initializeInput(){this._inputElement=this._component.querySelector(a.selectors.INPUT)}_initializeCalendarDropdown(){const t=this._getDefaultTargetElement();this._calendarDropdown=new v(t,this._dropdownIdentifier)}initializeMask(t){var e;(e=this._inputMask)==null||e.destroy(),this._inputMask=new b(this._inputElement,t)}destroyMask(){var t;(t=this._inputMask)==null||t.destroy(),this._inputMask=void 0}initializeAccessibility(){this._inputElement.setAttribute("autocomplete","off"),this._inputElement.setAttribute("autocorrect","off"),this._inputElement.setAttribute("autocapitalize","off"),this._inputElement.setAttribute("spellcheck","false"),this._inputElement.setAttribute("role","combobox"),this._inputElement.setAttribute("aria-live","assertive"),this._inputElement.setAttribute("aria-atomic","true"),this._inputElement.setAttribute("aria-haspopup","true"),this._inputElement.setAttribute("aria-expanded","false"),this._inputElement.setAttribute("aria-owns",this._dropdownIdentifier)}addInputListener(t,e,i){var s;(s=this._inputElement)==null||s.addEventListener(t,e,{capture:i})}removeInputListener(t,e,i){var s;(s=this._inputElement)==null||s.removeEventListener(t,e,{capture:i})}setInputValueChangedListener(t,e){this.destroyValueChangeListener();const i=S(t,this._inputElement,"value",e);this._valueChangeListeners.push(i)}hasInputElement(){return!!this._inputElement}attachCalendar(t,e){super.attachCalendar(t,e),this._inputElement.setAttribute("aria-expanded","true")}detachCalendar(){super.detachCalendar(),this._inputElement&&(this._inputElement.setAttribute("aria-expanded","false"),this._inputElement.removeAttribute("aria-activedescendant"))}setActiveDescendant(t){this._inputElement.setAttribute("aria-activedescendant",t)}setInputValue(t,e){this._inputElement.value!==t&&(this._inputElement.value=t,this._inputMask&&this._inputMask.updateMask(),e&&(this._inputElement.dispatchEvent(new Event("change")),this._inputElement.dispatchEvent(new Event("input"))))}isInputDisabled(){return this._inputElement.disabled}isInputFocused(){return V(this._component.ownerDocument)===this._inputElement}getInputValue(){return this._inputMask?this._inputMask.maskedValue:this._inputElement.value}setDisabled(t){this._inputElement.disabled=t,this._inputElement.setAttribute("aria-disabled",t.toString()),this._toggleElement&&(this._toggleElement.setAttribute("aria-disabled",t.toString()),this._toggleElement.hasOwnProperty("disabled")&&(this._toggleElement.disabled=t))}tryFocusInput(){this._inputElement.focus()}tryBlurInput(){this._inputElement.blur()}selectInputText(){this._inputElement.select()}emitInputEvent(t,e){A(this._inputElement,t,e)}}class L extends C{constructor(t){super(t),this._mode="single"}_initializeState(){this._value||(this._value=this._coerceDateValue(this._adapter.getInputValue()))}_emitChangeEvent(t,e){const i=this._getTypedValue(t);return this._adapter.emitHostEvent(a.events.CHANGE,i,!0,!e)?(this._setValue(t),!0):!1}_emitOpenEvent(){this._adapter.emitHostEvent(a.events.OPEN,void 0,!1)}_emitCloseEvent(){this._adapter.emitHostEvent(a.events.CLOSE,void 0,!1)}_onToday(){const t=new Date;t.setHours(0,0,0,0),this._onDateSelected({date:t,selected:!0,type:"date"})}_onClear(){this._onDateSelected({date:null,selected:!1,type:"date"})}_getCurrentValue(){return this._value}_setFormattedInputValue(t){const e=this._formatDate(this._value);e?this._adapter.setInputValue(e,t?!1:this._notifyInputValueChanges):this._allowInvalidDate||this._adapter.setInputValue("",t?!1:this._notifyInputValueChanges)}_setValue(t){(!t||this._isDateValueAcceptable(t))&&(this._value=t)}_onDateSelected(t){const e=t.date;if(t.type==="date"&&this._closeCalendar(!0),!this._emitChangeEvent(e))return;const i=this._formatDate(e);this._adapter.setInputValue(i,this._notifyInputValueChanges),this._formatInputValue(),y.isMobile||this._adapter.selectInputText()}_openCalendar(t){super._openCalendar(t);const e=this._getCurrentValue();e&&this._adapter.goToCalendarDate(new Date(e))}_applyMin(){this._value&&!this._isDateValueAcceptable(this._value)&&(this._emitChangeEvent(null,!0),this._setFormattedInputValue()),super._applyMin()}_applyMax(){this._value&&!this._isDateValueAcceptable(this._value)&&(this._emitChangeEvent(null,!0),this._setFormattedInputValue()),super._applyMax()}_applyDisabledDates(){this._value&&!this._isDateValueAcceptable(this._value)&&(this._emitChangeEvent(null,!0),this._setFormattedInputValue())}_applyDisabledDaysOfWeek(){this._value&&!this._isDateValueAcceptable(this._value)&&(this._emitChangeEvent(null,!0),this._setFormattedInputValue())}_handleInput(t){const e=this._getSanitizedDateString(t),i=this._coerceDateValue(e);this._masked&&this._adapter.emitInputEvent(a.events.INPUT,e),!o(i,this._value)&&this._isDateValueAcceptable(i)&&this._emitChangeEvent(i)}_onInputValueChanged(t){const e=this._getSanitizedDateString(t);if(this._masked&&e)return;const i=this._coerceDateValue(e);!o(i,this._value)&&this._isDateValueAcceptable(i)&&(this.value=i,this._emitChangeEvent(this._value))}_applyValue(){this._setFormattedInputValue(),this._open&&this._adapter.setCalendarValue(this._value)}get value(){const t=this._getTypedValue(this._value);return t?P(t)?new Date(t.getTime()):t:null}set value(t){this._value!==t&&(this._setValue(this._coerceDateValue(t)),this._isInitialized&&this._applyValue())}}const z=`<template>
  <slot></slot>
</template>`,F=":host{display:block}:host([hidden]){display:none}";var x=Object.defineProperty,B=Object.getOwnPropertyDescriptor,U=(n,t,e,i)=>{for(var s=i>1?void 0:i?B(t,e):t,u=n.length-1,r;u>=0;u--)(r=n[u])&&(s=(i?r(t,e,s):r(s))||s);return i&&s&&x(t,e,s),s};let p=class extends I{static get observedAttributes(){return[...Object.values(g.observedAttributes),a.observedAttributes.VALUE]}constructor(){super(),d.define(h),w(this,z,F),this._foundation=new L(new O(this))}attributeChangedCallback(n,t,e){switch(n){case a.observedAttributes.VALUE:this.value=e;return}super.attributeChangedCallback(n,t,e)}};p=U([k({name:a.elementName,dependencies:[E,_,m,c]})],p);
