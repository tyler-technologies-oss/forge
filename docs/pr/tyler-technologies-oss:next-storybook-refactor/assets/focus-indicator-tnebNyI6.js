import{C as h,v as _,B as l,w as p,h as d}from"./constants-CcUPD__a.js";import{B as g,F as n}from"./base-adapter-Br8WWaYY.js";import{l as v}from"./utils-CpIAGiZD.js";import"./index-Dh0vMUMR.js";class m extends g{constructor(t){super(t),this._targetElement=null}destroy(){this._targetElement=null}hasTargetElement(){return!!this._targetElement}addTargetListener(t,e){var a;(a=this._targetElement)==null||a.addEventListener(t,e)}removeTargetListener(t,e){var a;(a=this._targetElement)==null||a.removeEventListener(t,e)}getTargetElement(){return this._targetElement}setTargetElement(t){this._targetElement=t}trySetTarget(t){this._targetElement=v(this._component,t)}isActive(t,e){const a=e??this._targetElement;return!!(a!=null&&a.matches(t))}}const w=`${h}focus-indicator`,b={TARGET:"target",ACTIVE:"active",INWARD:"inward",CIRCULAR:"circular",ALLOW_FOCUS:"allow-focus",FOCUS_MODE:"focus-mode"},C={...b},E={FOCUS_MODE:"focusin"},r={elementName:w,attributes:C,defaults:E};class A{constructor(t){this._adapter=t,this._target=null,this._active=!1,this._inward=!1,this._circular=!1,this._allowFocus=!1,this._focusMode=r.defaults.FOCUS_MODE,this._interactionListener=e=>this._onInteraction(e)}initialize(){this._adapter.hasTargetElement()||this._adapter.trySetTarget(this._target),this._addListeners()}destroy(){this._removeListeners(),this._adapter.destroy()}_addListeners(){this._adapter.addTargetListener(this._focusMode,this._interactionListener),this._adapter.addTargetListener("focusout",this._interactionListener),this._adapter.addTargetListener("pointerdown",this._interactionListener)}_removeListeners(){this._adapter.removeTargetListener(this._focusMode,this._interactionListener),this._adapter.removeTargetListener("focusout",this._interactionListener),this._adapter.removeTargetListener("pointerdown",this._interactionListener)}_onInteraction(t){const e=t.target;switch(t.type){case this._focusMode:this.active=this._adapter.isActive(this._allowFocus?":focus":":focus-visible",e);break;case"focusout":this.active=!1;break;case"pointerdown":this.active=this._allowFocus?this._adapter.isActive(":focus",e):this._adapter.isActive(":focus-visible",e);break}}get targetElement(){return this._adapter.getTargetElement()}set targetElement(t){this._removeListeners(),this._adapter.setTargetElement(t),this._addListeners()}get target(){return this._adapter.getHostAttribute(r.attributes.TARGET)}set target(t){this._target!==t&&(this._target=t,this._adapter.isConnected&&this._adapter.trySetTarget(t),this._adapter.toggleHostAttribute(r.attributes.TARGET,!!this._target,this._target))}get active(){return this._active}set active(t){t=!!t,this._active!==t&&(this._active=t,this._adapter.toggleHostAttribute(r.attributes.ACTIVE,this._active))}get inward(){return this._inward}set inward(t){t=!!t,this._inward!==t&&(this._inward=t,this._adapter.toggleHostAttribute(r.attributes.INWARD,this._inward))}get circular(){return this._circular}set circular(t){t=!!t,this._circular!==t&&(this._circular=t,this._adapter.toggleHostAttribute(r.attributes.CIRCULAR,this._circular))}get allowFocus(){return this._allowFocus}set allowFocus(t){t=!!t,this._allowFocus!==t&&(this._allowFocus=t,this._adapter.toggleHostAttribute(r.attributes.ALLOW_FOCUS,this._allowFocus))}get focusMode(){return this._focusMode}set focusMode(t){if(t??(t=r.defaults.FOCUS_MODE),this._focusMode!==t){this._adapter.isConnected&&this._removeListeners(),this._focusMode=t,this._adapter.isConnected&&this._addListeners();const e=this._focusMode!==r.defaults.FOCUS_MODE;this._adapter.toggleHostAttribute(r.attributes.FOCUS_MODE,e,this._focusMode)}}}const L=`<template></template>
`,T=":host{--_focus-indicator-display: var(--forge-focus-indicator-display, flex);--_focus-indicator-width: var(--forge-focus-indicator-width, var(--forge-border-medium, 2px));--_focus-indicator-active-width: var(--forge-focus-indicator-active-width, 6px);--_focus-indicator-color: var(--forge-focus-indicator-color, var(--forge-theme-primary, #3f51b5));--_focus-indicator-shape: var(--forge-focus-indicator-shape, var(--forge-shape-extra-small, 1px));--_focus-indicator-duration: var(--forge-focus-indicator-duration, var(--forge-animation-duration-long4, .6s));--_focus-indicator-easing: var(--forge-focus-indicator-easing, var(--forge-animation-easing-emphasized, cubic-bezier(.2, 0, 0, 1)));--_focus-indicator-shape-start-start: var(--forge-focus-indicator-shape-start-start, var(--_focus-indicator-shape));--_focus-indicator-shape-start-end: var(--forge-focus-indicator-shape-start-end, var(--_focus-indicator-shape));--_focus-indicator-shape-end-end: var(--forge-focus-indicator-shape-end-end, var(--_focus-indicator-shape));--_focus-indicator-shape-end-start: var(--forge-focus-indicator-shape-end-start, var(--_focus-indicator-shape));--_focus-indicator-outward-offset: var(--forge-focus-indicator-outward-offset, var(--forge-spacing-xxsmall, 4px));--_focus-indicator-inward-offset: var(--forge-focus-indicator-inward-offset, 0px);--_focus-indicator-offset-block: var(--forge-focus-indicator-offset-block, 0);--_focus-indicator-offset-inline: var(--forge-focus-indicator-offset-inline, 0)}:host{animation-delay:0s,calc(var(--_focus-indicator-duration) * .25);animation-duration:calc(var(--_focus-indicator-duration) * .25),calc(var(--_focus-indicator-duration) * .75);animation-timing-function:var(--_focus-indicator-easing);box-sizing:border-box;color:var(--_focus-indicator-color);display:none;pointer-events:none;position:absolute;margin-block:var(--_focus-indicator-offset-block);margin-inline:var(--_focus-indicator-offset-inline)}:host([hidden]){display:none}:host([active]){display:var(--_focus-indicator-display)}:host(:not([inward])){animation-name:outward-grow,outward-shrink;border-end-end-radius:calc(var(--_focus-indicator-shape-end-end) + var(--_focus-indicator-outward-offset));border-end-start-radius:calc(var(--_focus-indicator-shape-end-start) + var(--_focus-indicator-outward-offset));border-start-end-radius:calc(var(--_focus-indicator-shape-start-end) + var(--_focus-indicator-outward-offset));border-start-start-radius:calc(var(--_focus-indicator-shape-start-start) + var(--_focus-indicator-outward-offset));inset:calc(-1 * var(--_focus-indicator-outward-offset));outline:var(--_focus-indicator-width) solid currentColor}:host([inward]){animation-name:inward-grow,inward-shrink;border-end-end-radius:calc(var(--_focus-indicator-shape-end-end) - var(--_focus-indicator-inward-offset));border-end-start-radius:calc(var(--_focus-indicator-shape-end-start) - var(--_focus-indicator-inward-offset));border-start-end-radius:calc(var(--_focus-indicator-shape-start-end) - var(--_focus-indicator-inward-offset));border-start-start-radius:calc(var(--_focus-indicator-shape-start-start) - var(--_focus-indicator-inward-offset));border:var(--_focus-indicator-width) solid currentColor;inset:var(--_focus-indicator-inward-offset)}:host([circular]){--_focus-indicator-shape: var(--forge-focus-indicator-shape, 50%)}@keyframes outward-grow{0%{outline-width:0}to{outline-width:var(--_focus-indicator-active-width)}}@keyframes outward-shrink{0%{outline-width:var(--_focus-indicator-active-width)}}@keyframes inward-grow{0%{border-width:0}to{border-width:var(--_focus-indicator-active-width)}}@keyframes inward-shrink{0%{border-width:var(--_focus-indicator-active-width)}}@media (prefers-reduced-motion){:host{animation:none}}";var F=Object.defineProperty,O=Object.getOwnPropertyDescriptor,s=(c,t,e,a)=>{for(var o=a>1?void 0:a?O(t,e):t,u=c.length-1,f;u>=0;u--)(f=c[u])&&(o=(a?f(t,e,o):f(o))||o);return a&&o&&F(t,e,o),o};let i=class extends l{static get observedAttributes(){return Object.values(r.attributes)}constructor(){super(),p(this,L,T),this._foundation=new A(new m(this))}connectedCallback(){this._foundation.initialize()}disconnectedCallback(){this._foundation.destroy()}attributeChangedCallback(c,t,e){switch(c){case r.attributes.TARGET:this.target=e;break;case r.attributes.ACTIVE:this.active=d(e);break;case r.attributes.INWARD:this.inward=d(e);break;case r.attributes.CIRCULAR:this.circular=d(e);break;case r.attributes.ALLOW_FOCUS:this.allowFocus=d(e);break;case r.attributes.FOCUS_MODE:this.focusMode=e;break}}};s([n()],i.prototype,"targetElement",2);s([n()],i.prototype,"target",2);s([n()],i.prototype,"active",2);s([n()],i.prototype,"inward",2);s([n()],i.prototype,"circular",2);s([n()],i.prototype,"allowFocus",2);s([n()],i.prototype,"focusMode",2);i=s([_({name:r.elementName})],i);export{r as F,i as a};
