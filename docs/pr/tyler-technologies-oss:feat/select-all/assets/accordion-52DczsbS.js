import{C as _,j as m,B as d}from"./constants-DzQy6WDX.js";import{B as u,c as E}from"./base-adapter-C8aSF3nG.js";import"./service-adapter-CffG5Lhq.js";import{E as c,e as C,a as N}from"./expansion-panel-CtPm9dI4.js";import"./index-5CPwzmQS.js";import{e as f}from"./feature-detection-B-sRDmdg.js";class P extends u{constructor(e){super(e)}isNestedPanel(e){return!e||!this._component.contains(e)?!1:f(e,this._component).some(t=>t.tagName.toLocaleLowerCase()===c.elementName)}getChildPanels(e){return e?Array.from(this._component.querySelectorAll(e)):Array.from(this._component.children).filter(t=>t.tagName.toLocaleLowerCase()===c.elementName)}}const p=`${_}accordion`,S={PANEL_SELECTOR:"panel-selector"},A={TOGGLE:`${p}-toggle`},o={elementName:p,attributes:S,events:A};class b{constructor(e){this._adapter=e,this._hostInteractionCallback=this._hostInteraction.bind(this)}initialize(){this._attachListeners()}_attachListeners(){this._adapter.addHostListener(c.events.TOGGLE,this._hostInteractionCallback)}_hostInteraction(e){if(!e.detail||this._panelSelector&&!e.target.matches(this._panelSelector)||(e.stopPropagation(),this._adapter.isNestedPanel(e.target)))return;this._adapter.getChildPanels(this._panelSelector).forEach(t=>{e.target!==t&&!this._adapter.isNestedPanel(t)&&t.open&&t[C](!1)}),this._adapter.dispatchHostEvent(new CustomEvent(o.events.TOGGLE,{detail:e.target,bubbles:!0,composed:!0}))}get panelSelector(){return this._panelSelector}set panelSelector(e){this._panelSelector!==e&&(this._panelSelector=e,this._adapter.setHostAttribute(o.attributes.PANEL_SELECTOR,this._panelSelector))}}var L=Object.defineProperty,O=Object.getOwnPropertyDescriptor,h=(a,e,s,t)=>{for(var r=t>1?void 0:t?O(e,s):e,n=a.length-1,i;n>=0;n--)(i=a[n])&&(r=(t?i(e,s,r):i(r))||r);return t&&r&&L(e,s,r),r};let l=class extends d{static get observedAttributes(){return[o.attributes.PANEL_SELECTOR]}constructor(){super(),this._core=new b(new P(this))}connectedCallback(){this._core.initialize()}attributeChangedCallback(a,e,s){switch(a){case o.attributes.PANEL_SELECTOR:this.panelSelector=s;break}}};h([E()],l.prototype,"panelSelector",2);l=h([m({name:o.elementName,dependencies:[N]})],l);
