import{Q as W,R as D,S as j,I as z}from"./icon-kuXwuZAY.js";import{A as G,j as v,B as q,h as R,C as M,D as L,d as P,r as K,a as X,E as B,F as Q}from"./feature-detection-B-sRDmdg.js";import{g as Y}from"./event-utils-C1SDeUaq.js";import{S as y,e as g}from"./service-adapter-CffG5Lhq.js";import{I as J,n as Z,l as N}from"./constants-DzQy6WDX.js";import{L as tt}from"./linear-progress-r0Hzg69v.js";import{b as et,c as it}from"./list-DV7qwxl8.js";import{a as b}from"./popover-BAoNoe3k.js";import{f as st}from"./utils-Bd6MGx91.js";import"./overlay-B5pGv-rV.js";import"./index-5CPwzmQS.js";import{S as nt}from"./skeleton-BSiuL_ME.js";import{c as ot}from"./a11y-BxM9_46k.js";class lt{constructor(){this._listenerMap=new Map}_emit(t,e){const s=this._listenerMap.get(t);s&&s.length&&s.forEach(n=>n({type:t,data:e}))}hasListeners(t){return t?this._listenerMap.has(t):this._listenerMap.size>0}addListener(t,e){if(!this._listenerMap.has(t))this._listenerMap.set(t,[e]);else{const s=this._listenerMap.get(t);s&&s.push(e)}}removeListener(t,e){const s=this._listenerMap.get(t);s&&s.length&&s.includes(e)&&(s.splice(s.indexOf(e),1),s.length||this._listenerMap.delete(t))}}const rt=100;class at extends lt{constructor(t,e={}){super(),this._element=t,this._config=e,this._axis="vertical",this._scrollThreshold=0,this._lastScrollPosition=0,this._lastScrollTop=0,this._lastScrollLeft=0,this._isListening=!1,this._initialize()}destroy(){this.stop()}start(){this._isListening||(this._element.addEventListener("scroll",this._scrollListener),this._isListening=!0)}stop(){this._element.removeEventListener("scroll",this._scrollListener),this._isListening=!1}_initialize(){if(this._config.throttle){const t=this._config.throttleTime||rt;this._scrollListener=G(()=>this._onScroll(),t)}else this._scrollListener=()=>this._onScroll();(!v(this._config.paused)||!this._config.paused)&&this.start(),v(this._config.axis)&&(this._axis=this._config.axis),v(this._config.scrollThreshold)&&q(this._config.scrollThreshold)&&(this._scrollThreshold=this._config.scrollThreshold)}_isScrollAxis(){const t=this._lastScrollTop!==this._element.scrollTop,e=this._lastScrollLeft!==this._element.scrollLeft;return this._axis==="vertical"&&t||this._axis==="horizontal"&&e}_onScroll(){if(!this._isScrollAxis())return;const t=this.scrollPosition,e=this._lastScrollPosition-t<0?this._axis==="vertical"?y.Down:y.Right:this._axis==="vertical"?y.Up:y.Left;this._emit(g.Scroll,{direction:e,position:t}),this._lastScrollPosition<=this._scrollThreshold&&t>this._scrollThreshold?this._emit(g.Scrolled,!0):this._lastScrollPosition>=this._scrollThreshold&&(this._scrollThreshold>0?t<this._scrollThreshold:t===0)&&this._emit(g.Scrolled,!1);const s=Math.round(t-this._scrollThreshold),n=Math.round(this.scrollSize-t);this._lastScrollPosition>=this._scrollThreshold&&s<=0?this._emit(g.ScrolledStart):this._lastScrollPosition<=this.scrollSize-this._scrollThreshold&&n<=this._scrollThreshold&&this._emit(g.ScrolledEnd),this._lastScrollPosition=t||0,this._lastScrollTop=this._element.scrollTop||0,this._lastScrollLeft=this._element.scrollLeft||0}get scrollPosition(){return this._axis==="vertical"?this._element.scrollTop:this._element.scrollLeft}get isScrolled(){return this.scrollPosition>this._scrollThreshold}get isScrolledStart(){return this.scrollPosition===0}get isScrolledEnd(){return this.scrollPosition===this._element.scrollWidth}get isScrollable(){return this._axis==="vertical"?this._element.scrollHeight>this._element.clientHeight:this._element.scrollWidth>this._element.clientWidth}get scrollSize(){return(this._axis==="vertical"?this._element.scrollHeight:this._element.scrollWidth)-this.elementSize}get elementSize(){return this._axis==="vertical"?this._element.clientHeight:this._element.clientWidth}setScrollPosition(t){this._axis==="vertical"?this._element.scrollTop=t:this._element.scrollLeft=t}}const ct={POPUP_CLASSES:"popup-classes",OPTION_LIMIT:"option-limit",OBSERVE_SCROLL:"observe-scroll",OBSERVE_SCROLL_THRESHOLD:"observe-scroll-threshold",SYNC_POPUP_WIDTH:"sync-popup-width",CONSTRAIN_POPUP_WIDTH:"constrain-popup-width",WRAP_OPTION_TEXT:"wrap-option-text",POPOVER_PLACEMENT:"popover-placement",POPOVER_OFFSET:"popover-offset",POPOVER_FLIP:"popover-flip",POPOVER_SHIFT:"popover-shift"},dt={CHECKBOX_ELEMENT:"data-list-dropdown-checkbox",DATA_ALLOW_FOCUS:"data-list-dropdown-allow-focus"},ht={GROUP_WRAPPER:"forge-list-dropdown__group-wrapper"},pt={VALUE:"__forge_select_all__",LABEL:"Select All"},u={observedAttributes:ct,attributes:dt,classes:ht,selectAllOption:pt},mt={options:[],syncWidth:!1,selectedValues:[],multiple:!1};var f=(i=>(i.None="none",i.Standard="standard",i.Menu="menu",i))(f||{}),k=(i=>(i.Spinner="spinner",i.Skeleton="skeleton",i))(k||{}),_t=(i=>(i[i.Option=0]="Option",i[i.Group=1]="Group",i))(_t||{});function ut(i,t){const e=ft(i,t),s=`list-dropdown-popup-${i.id}`;return e.addEventListener("mousedown",n=>{const r=Y(n);if(r.find(h=>h.nodeType===1&&h.hasAttribute(u.attributes.DATA_ALLOW_FOCUS)))return;r.find(h=>h.id===s||h.id===i.id)&&n.preventDefault()}),i.id&&(e.id=s),i.popupClasses&&R(i.popupClasses,e),e}function ft(i,t){const e=document.createElement("forge-popover");return e.anchorElement=t,e.placement=i.popupPlacement||"bottom-start",e.persistent=!!i.popupStatic,e.triggerType="manual",i.popupFallbackPlacements?.length&&(e.fallbackPlacements=i.popupFallbackPlacements),i.constrainViewportWidth&&e.setAttribute(b.attributes.CONSTRAIN_VIEWPORT_WIDTH,""),i.popupOffset&&(e.offset=i.popupOffset),i.popupFlip&&(e.flip=i.popupFlip),i.popupShift!==void 0&&(e.shift=i.popupShift),i.anchorAccessibility&&(e.anchorAccessibility=i.anchorAccessibility),i.type===f.None&&(e.animationType="none"),e}function Et(i){const t=document.createElement(et.elementName);switch(t.id=`list-dropdown-list-${i.id}`,i.type){case f.Menu:t.setAttribute("role","menu"),t.setAttribute("aria-orientation","vertical");break;default:t.setAttribute("role","listbox")}return i.type!==f.Menu&&i.multiple&&t.setAttribute("aria-multiselectable","true"),i?.referenceElement?.id&&t.setAttribute("aria-labelledby",i.referenceElement.id),t}function w(i,t,e,s=0,n=!0){let r=e||i.options;if(i.showSelectAll&&i.multiple&&s===0){const _={value:u.selectAllOption.VALUE,label:i.selectAllLabel||u.selectAllOption.LABEL},E={value:"",label:"",divider:!0};if(C(r,1)){const o=r;o.length>0?(o[0]={...o[0],options:[_,E,...o[0].options]},r=o):r=[{text:"",options:[_,E]}]}else r=[_,E,...r]}const a=Lt(r),m=H(a),h=!!i.optionLimit;let I=i.optionLimit||0,S=s;for(const _ of a){let E=t;if(_.builder&&typeof _.builder=="function"){const o=_.builder(_);if(o){const d=document.createElement("div");d.classList.add(u.classes.GROUP_WRAPPER),E=d,typeof o=="string"?d.innerHTML=o:o instanceof HTMLElement&&d.appendChild(o),t.appendChild(d)}}else if(_.text){const o=document.createElement("div");o.classList.add(u.classes.GROUP_WRAPPER);const d=document.createElement("div");d.textContent=_.text,d.classList.add("forge-typography--overline"),d.style.fontFamily="Roboto,sans-serif",d.style.fontSize="0.75rem",d.style.lineHeight="2rem",d.style.letterSpacing="0.16667em",d.style.fontWeight="500",d.style.margin="4px 8px",E=o,o.appendChild(d),t.appendChild(o)}for(const o of _.options){if(o.divider){const l=Ot();t.appendChild(l);continue}if(h&&--I<0)break;const d=i.selectedValues?i.selectedValues.some(l=>M(l,o.value)):!1;if(!n&&d)continue;let c=document.createElement("forge-list-item");c.value=o.value,c.focusPropagation="off",c.setAttribute("role","presentation");const p=document.createElement("button");if(p.type="button",p.id=`list-dropdown-option-${i.id}-${S++}`,p.setAttribute("role",i.type==="menu"?"menuitem":"option"),c.appendChild(p),i.wrapOptionText&&(c.wrap=!0),o.optionClass&&(typeof o.optionClass=="string"||Array.isArray(o.optionClass)&&o.optionClass.length)&&R(o.optionClass,c),i.dense&&(c.dense=!0),i.optionBuilder&&typeof i.optionBuilder=="function"){const l=i.optionBuilder(o,c);l&&(typeof l=="string"?p.innerHTML=l:p.appendChild(l))}else if(typeof i.transform!="function")p.textContent=o.label||"";else{const l=i.transform(o.label,o,d);typeof l=="string"?p.textContent=l:typeof l=="object"&&l.nodeType!==void 0&&p.appendChild(l)}const O=document.createElement("span");if(o.secondaryLabel&&(O.slot="secondary-text",O.textContent=o.secondaryLabel,O.id=`list-dropdown-option-${i.id}-${S++}-secondary`,c.twoLine=!0,c.appendChild(O),p.setAttribute("aria-describedby",O.id)),o.tooltip)if(!v(o.tooltip?.visibilityMode)||o.tooltip?.visibilityMode==="always"){const l=F(o.tooltip,i.id,S,c,p);c.appendChild(l)}else o.tooltip?.visibilityMode==="overflow-only"&&gt(o.tooltip,i.id,S,c,p,O);if(i.multiple){const l=A(d);c.appendChild(l),o.disabled||p.setAttribute("aria-selected",`${d}`),p.setAttribute("aria-checked",`${d}`)}if(o.elementAttributes&&o.elementAttributes.forEach((l,x)=>{c.setAttribute(x,l)}),o.leadingBuilder){const l=o.leadingBuilder();L(l)&&(l.slot="leading",c.appendChild(l))}else if(o.leadingIcon){const l=V(o.leadingIconType,o.leadingIcon,o.leadingIconClass||i.iconClass,o.leadingIconComponentProps);l.slot="leading",c.appendChild(l)}if(o.trailingBuilder){const l=o.trailingBuilder();L(l)&&(l.slot="trailing",c.appendChild(l))}else if(o.trailingIcon){const l=V(o.trailingIconType,o.trailingIcon,o.trailingIconClass||i.iconClass,o.trailingIconComponentProps);l.slot="trailing",c.appendChild(l)}if(o.disabled&&(p.disabled=o.disabled),d&&(c.selected=!0),i.type!==f.Menu&&p.setAttribute("aria-selected",d?"true":"false"),!o.disabled&&typeof i.cascadingElementFactory=="function"&&Array.isArray(o.options)&&o.options.length){const l=document.createElement("forge-icon");l.name="arrow_right_alt",l.slot="trailing",c.appendChild(l);const U={index:m.filter($=>!$.divider).indexOf(o),options:o.options,parentValue:o.value},T=i.cascadingElementFactory.call(null,U);T.appendChild(c),c=T}E.appendChild(c)}}}function F(i,t,e,s,n){const{text:r,type:a="presentation",...m}=i,h=document.createElement("forge-tooltip");if(h.id=`list-dropdown-option-${t}-${e++}-tooltip`,h.textContent=i.text,!i.anchor&&!i.anchorElement&&(h.anchorElement=s),a==="label"||a==="description"){const I=a==="label"?"aria-labelledby":"aria-describedby";n.setAttribute(I,h.id)}return Object.assign(h,m),h}async function gt(i,t,e,s,n,r){if(await st(),n.scrollWidth>s.clientWidth||r.scrollWidth>s.clientWidth){const a=F(i,t,e,s,n);s.appendChild(a)}}function A(i){const t=document.createElement("forge-icon");return t.setAttribute(u.attributes.CHECKBOX_ELEMENT,""),t.name=i?W.name:D.name,t.slot="leading",t.style.marginRight="16px",t.style.verticalAlign="middle",t}function Ot(){return document.createElement("forge-divider")}function V(i="font",t,e,s){if(i==="component"){const r=document.createElement("forge-icon");return e&&r.classList.add(e),r.setAttribute("aria-hidden","true"),r.name=t,s&&Object.assign(r,s),r}const n=document.createElement("i");return n.classList.add(e||J),n.setAttribute("aria-hidden","true"),n.textContent=t,n}function vt(i){switch(i){case k.Skeleton:return St();default:return bt()}}function bt(){const i=document.createElement("div");i.style.display="flex",i.style.justifyContent="center",i.style.alignItems="center",i.style.padding="8px",i.style.boxSizing="border-box";const t=document.createElement("forge-circular-progress");return t.style.setProperty("--forge-circular-progress-size","24px"),i.appendChild(t),i}function St(){const i=document.createElement("forge-list"),t=document.createElement("div");t.style.minWidth="192px";for(let e=0;e<3;e++){const s=document.createElement(nt.elementName);s.setAttribute("list-item",""),t.appendChild(s)}return i.appendChild(t),i}function yt(){const i=document.createElement(tt.elementName);return i.determinate=!1,i.style.position="absolute",i.style.top="0",i.style.left="0",i.style.right="0",i.style.width="100%",i}function Lt(i){return C(i,1)?i:[{text:"",options:i}]}function C(i,t){const e=i.some(n=>v(n)&&L(n)&&Object.prototype.hasOwnProperty.call(n,"options")&&(Object.prototype.hasOwnProperty.call(n,"text")||Object.prototype.hasOwnProperty.call(n,"builder"))),s=i.some(n=>v(n)&&L(n)&&Object.prototype.hasOwnProperty.call(n,"label")&&Object.prototype.hasOwnProperty.call(n,"value"));return e&&t===1||s&&t===0}function H(i){return C(i,1)?i.reduce((e,s)=>e.concat(s.options),[]):[...i]}class It{constructor(t,e){this._adapter=t,this._open=!1,this._config=Object.assign({...mt},{...e}),this._selectListener=(s,n)=>this._onSelect(s,n),this._closeListener=()=>{typeof this._config.closeCallback=="function"&&this._config.closeCallback()},this._scrollEndListener=()=>{this._config.observeScroll&&typeof this._config.scrollEndListener=="function"&&this._config.scrollEndListener()}}destroy(){this._adapter.remove()}open(){this._open||(this._open=!0,this._adapter.open(this._config,this._selectListener,this._closeListener),window.requestAnimationFrame(()=>{this._open&&this.activateInitialOption()}),this._config.observeScroll&&this._config.scrollEndListener&&this._adapter.setScrollBottomListener(this._scrollEndListener,this._config.observeScrollThreshold||0))}async close(){this._open&&(this._open=!1,this._config.observeScroll&&this._config.scrollEndListener&&this._adapter.removeScrollBottomListener(this._scrollEndListener),await this._adapter.close())}_onSelect(t,e){if(typeof this._config.activeChangeCallback=="function"&&this._config.activeChangeCallback(e),typeof this._config.selectCallback=="function"&&this._config.selectCallback(t),this._open){const s=this._config.syncWidth===void 0;this._adapter.syncWidth(s)}}getActiveOptionIndex(){return this._adapter.getActiveOptionIndex()}getActiveOption(){const t=this.getActiveOptionIndex();return t>=0?this._nonDividerOptions[t]:void 0}toggleOptionMultiple(t,e){return this._adapter.toggleOptionMultiple(t,e)}activateSelectedOption(){this._adapter.activateSelectedOption(this._config)}activateFirstOption(){const t=this._nonDividerOptions.findIndex(e=>!e.disabled);return t!==-1&&this.activateOption(t),t}activateLastOption(){const t=this._nonDividerOptions,e=t.length-1-t.findIndex(s=>!s.disabled);return e!==-1&&this.activateOption(e),e}activateOption(t,e){return this._adapter.activateOption(t,this._config.activeChangeCallback,e)}activateInitialOption(){typeof this._config.activeStartIndex=="number"&&this._nonDividerOptions[this._config.activeStartIndex]?(this.activateOption(this._config.activeStartIndex,!1),this._adapter.scrollSelectedOptionIntoView(!1)):this._config.selectedValues&&this._config.selectedValues.length?this._adapter.scrollSelectedOptionIntoView(!1):typeof this._config.visibleStartIndex=="number"&&this._nonDividerOptions[this._config.visibleStartIndex]&&this._adapter.scrollOptionIntoView(this._config.visibleStartIndex)}setSelectedValues(t){Array.isArray(t)||(t=[t]),!this._config.multiple&&t.length>1&&(t=[t[0]]),this._config.selectedValues=t,this._adapter.setSelectedValues(t,this._config.multiple)}clearActiveOption(){this._adapter.clearActiveOption()}setOptions(t){this._config.options=t,this._open&&(this._adapter.setOptions(this._config),this.activateInitialOption())}appendOptions(t){this._config.options=[...this._config.options,...t],this._open&&this._adapter.appendOptions(t,this._config)}get dropdownElement(){return this._adapter.dropdownElement}scrollSelectedOptionIntoView(t=!0){this._adapter.scrollSelectedOptionIntoView(t)}setScrollBottomListener(t,e){this._config.scrollEndListener=t,this._config.observeScroll=!0,this._config.observeScrollThreshold=e,this._adapter.setScrollBottomListener(this._scrollEndListener,this._config.observeScrollThreshold||0)}removeScrollBottomListener(){this._config.scrollEndListener=void 0,this._adapter.removeScrollBottomListener(this._scrollEndListener)}setBusyVisibility(t){this._config.allowBusy&&this._adapter.setBusyVisibility(t)}handleKey(t){switch(t){case"Enter":case"NumpadEnter":{const e=this.getActiveOptionIndex(),s=this._nonDividerOptions[e];if(this._canSelectOption(s)){const n=this._adapter.getActiveOptionIdByIndex(e);n&&this._onSelect(s.value,n)}break}case"Up":case"ArrowUp":case"Down":case"ArrowDown":{const e=this._nonDividerOptions;if(e.length&&e.every(n=>!this._canSelectOption(n)))return;const s=this._getNextActiveOptionIndex(t);this.activateOption(s);break}case"Home":this.activateFirstOption();break;case"End":this.activateLastOption();break}}_canSelectOption(t){return t&&!t.disabled&&!t.divider}_getNextActiveOptionIndex(t){let e=this._adapter.getActiveOptionIndex();return e===-1&&(e=this._adapter.getSelectedOptionIndex()),t==="ArrowUp"||t==="Up"?this._getPreviousHighlightableOptionIndex(e,this._nonDividerOptions):this._getNextHighlightableOptionIndex(e,this._nonDividerOptions)}_getPreviousHighlightableOptionIndex(t,e){const s=t<=0?e.length-1:t-1;return e[s].disabled?this._getPreviousHighlightableOptionIndex(s,e):s}_getNextHighlightableOptionIndex(t,e){const s=t===e.length-1?0:t+1;return e[s].disabled?this._getNextHighlightableOptionIndex(s,e):s}get _flatOptions(){return H(this._config.options)}get _nonDividerOptions(){return this._flatOptions.filter(t=>!t.divider)}}class wt{constructor(t){this._targetElement=t}get dropdownElement(){return this._dropdownElement}open(t,e,s){this._dropdownElement=ut(t,this._targetElement),t.type!==f.None&&t.type!==f.Menu?this._dropdownElement.preset="dropdown":t.type===f.Menu&&(this._dropdownElement.preset="list"),t.allowBusy&&(this._busyElement=yt(),this._busyElement.style.display="none",this._dropdownElement.appendChild(this._busyElement)),t.headerBuilder&&(this._headerElement=t.headerBuilder(),this._headerElement&&this._headerElement.setAttribute(u.attributes.DATA_ALLOW_FOCUS,"")),t.footerBuilder&&(this._footerElement=t.footerBuilder(),this._footerElement&&this._footerElement.setAttribute(u.attributes.DATA_ALLOW_FOCUS,"")),this._listElement=Et(t),this.syncWidth(!!t.syncWidth,t.targetWidthCallback),this._listElement.addEventListener("forge-list-item-select",a=>{const h=a.target.querySelector("button");h.setAttribute("aria-selected","true"),e(a.detail.value,h.id)}),t.options.length?(w(t,this._listElement),this._dropdownElement.appendChild(this._listElement),this._headerElement&&this._dropdownElement.insertAdjacentElement("afterbegin",this._headerElement),this._footerElement&&this._dropdownElement.appendChild(this._footerElement)):t.allowBusy&&(this._asyncElement=vt(t.asyncStyle),this._dropdownElement.appendChild(this._asyncElement)),this._announcerElement=ot(),this._announcerElement.id=`${t.id}-activedescendant`,this._dropdownElement.appendChild(this._announcerElement);const n=this._targetElement.ownerDocument??document;(Z(b.selectors.HOST,this._targetElement)??n.body).appendChild(this._dropdownElement),this._dropdownElement.setAttribute(b.attributes.HOST,""),this._dropdownElement.open=!0}async close(){this._dropdownElement&&(await this._dropdownElement.hideAsync(),this.remove())}remove(){this._dropdownElement?.remove(),this._dropdownElement=void 0,this._listElement=void 0,this._announcerElement=void 0}setScrollBottomListener(t,e){if(this._dropdownElement&&!this._scrollObserver){const s={scrollThreshold:e},n=N(this._dropdownElement,b.selectors.SURFACE);this._scrollObserver=new at(n,s),this._scrollObserver.addListener(g.ScrolledEnd,t)}}removeScrollBottomListener(t){this._scrollObserver&&this._scrollObserver.removeListener(g.ScrolledEnd,t)}getActiveOptionIndex(){if(!this._dropdownElement)return-1;const t=this._getListItemElements(),e=[...t].reverse().find(s=>s.active);return e?t.indexOf(e):-1}getSelectedOptionIndex(){return this._getListItemElements().findIndex(e=>e.selected)}getActiveOptionIdByIndex(t){if(!this._dropdownElement)return null;const n=this._getListItemElements()[t]?.querySelector("button");return n?n.id:null}toggleOptionMultiple(t,e){if(!this._dropdownElement)return;const s=this._getListItemElements();s.length&&s[t]&&this._toggleSelectedOption(s[t],e)}scrollOptionIntoView(t,e=!0){const s=this._getListItemElements()[t];s&&this._scrollListItemIntoView(s,e?"smooth":"auto","center")}scrollSelectedOptionIntoView(t=!0){const e=this._getSelectedListItem();this._scrollListItemIntoView(e,t?"smooth":"auto","center")}activateSelectedOption(t){const e=this._getListItemElements();e.length&&e.filter(r=>r.active).forEach(r=>r.active=!1);const s=this._getSelectedListItem();s&&this._activateListOption(s,t.activeChangeCallback)}activateOption(t,e,s=!0){if(!this._dropdownElement)return;const n=this._getListItemElements();n.length&&(n.filter(a=>a.active).forEach(a=>a.active=!1),this._activateListOption(n[t],e),this._scrollListItemIntoView(n[t],s?"smooth":"auto"))}setSelectedValues(t,e=!1){if(!this._dropdownElement)return;const s=this._getListItemElements();for(const n of s){const r=t.some(a=>M(a,n.value));if(n.selected=r,e){const a=n.querySelector(`[${u.attributes.CHECKBOX_ELEMENT}]`);if(a){const m=A(r);P(m,a)}}}}clearActiveOption(){this._getListItemElements().forEach(e=>e.active=!1)}async syncWidth(t,e){const s=t?"--forge-popover-width":"--forge-popover-min-width",n=this._getTargetElementWidth(e);this._dropdownElement?.style.setProperty(s,`${n}px`),this._listElement?.style.setProperty("min-width",`calc(${n}px - var(--forge-scrollbar-width, 16px))`)}setOptions(t){!this._dropdownElement||!this._listElement||(this._asyncElement&&this._asyncElement.isConnected&&K(this._asyncElement),this._busyElement&&(this._busyElement.style.display="none"),this._listElement.isConnected||this._dropdownElement.appendChild(this._listElement),X(this._listElement),w(t,this._listElement),this._headerElement&&!this._headerElement.isConnected&&this._dropdownElement.insertAdjacentElement("afterbegin",this._headerElement),this._footerElement&&!this._footerElement.isConnected&&this._dropdownElement.insertAdjacentElement("beforeend",this._footerElement),"position"in this._dropdownElement&&typeof this._dropdownElement.position=="function"&&this._dropdownElement.position())}appendOptions(t,e){!this._dropdownElement||!this._listElement||w(e,this._listElement,t,this._listElement.childElementCount,!1)}setBusyVisibility(t){this._dropdownElement&&(t?this._busyElement.style.removeProperty("display"):this._busyElement.style.display="none")}getScreenWidth(){return window.innerWidth}_getListItemElements(){return this._dropdownElement?Array.from(this._dropdownElement.querySelectorAll(it.elementName)):[]}_toggleSelectedOption(t,e){if(!this._dropdownElement)return;const s=this._getListItemElements();s.length&&s.filter(m=>m!==t&&m.active).forEach(m=>m.active=!1),t.selected=e;const n=t.querySelector("button");n.setAttribute("aria-selected",`${e}`),n.setAttribute("aria-checked",`${e}`);const r=t.querySelector(`${j.elementName}[slot=leading]`);if(r){const a=A(e);P(a,r)}}_getTargetElementWidth(t){return t&&B(t)?t():this._targetElement.getBoundingClientRect().width}_activateListOption(t,e){const s=t?.querySelector("button");t&&s&&!s.disabled&&(t.active=!0,e&&B(e)&&e(s.id))}_scrollListItemIntoView(t,e="auto",s="nearest"){if(t&&this._dropdownElement&&this._dropdownElement.isConnected){const n=N(this._dropdownElement,b.selectors.SURFACE);n&&Q(n,t,e,s)}}_getSelectedListItem(){return this._getListItemElements().find(e=>e.selected)}}class Ft{constructor(t,e){this._targetElement=t,z.define([W,D]),this._core=new It(new wt(this._targetElement),e)}destroy(){this._core.destroy()}open(){this._core.open()}close(){return this._core.close()}getActiveOptionIndex(){return this._core.getActiveOptionIndex()}getActiveOption(){return this._core.getActiveOption()}toggleOptionMultiple(t,e){return this._core.toggleOptionMultiple(t,e)}activateSelectedOption(){this._core.activateSelectedOption()}activateFirstOption(){return this._core.activateFirstOption()}activateOption(t){return this._core.activateOption(t)}activateInitialOption(){return this._core.activateInitialOption()}clearActiveOption(){this._core.clearActiveOption()}setSelectedValues(t){return this._core.setSelectedValues(t)}get dropdownElement(){return this._core.dropdownElement}setOptions(t){this._core.setOptions(t)}appendOptions(t){this._core.appendOptions(t)}scrollSelectedOptionIntoView(t){this._core.scrollSelectedOptionIntoView()}setScrollBottomListener(t,e){this._core.setScrollBottomListener(t,e)}removeScrollBottomListener(){this._core.removeScrollBottomListener()}setBusyVisibility(t){this._core.setBusyVisibility(t)}handleKey(t){this._core.handleKey(t)}}export{u as L,Ft as a,_t as b,k as c,f as d,C as i};
