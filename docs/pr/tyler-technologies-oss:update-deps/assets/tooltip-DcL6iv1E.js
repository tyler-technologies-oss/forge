import{C as u,l as d,s as c,c as m,B as v,k as E,j as L}from"./constants-y3-o2nLB.js";import{B as A,c as s}from"./base-adapter-BB1UtCX3.js";import{v as T,b as f,c as w}from"./feature-detection-BwPJgXni.js";import{b as P,c as g}from"./utils-BtvMddIW.js";import{O as _,a as S}from"./overlay-B72xXWi5.js";import{W as O}from"./with-longpress-listener-BTdNjnT1.js";import{D as y,t as x}from"./dismissible-stack-CF8GDA4v.js";import{W as N,a as k}from"./with-default-aria-BtzFnMjW.js";const D=`${u}tooltip`,b={ID:"id",OPEN:"open",TYPE:"type",ANCHOR:"anchor",TARGET:"target",PLACEMENT:"placement",POSITION:"position",DELAY:"delay",OFFSET:"offset",FLIP:"flip",BOUNDARY:"boundary",FALLBACK_PLACEMENTS:"fallback-placements",TRIGGER_TYPE:"trigger-type"},C={...b},I={LONGPRESS_VISIBILITY_DURATION:3e3},F={DELAY:500,OFFSET:4,FLIP:"auto",TYPE:"presentation",PLACEMENT:"right",TRIGGER_TYPES:["hover"]},R={CONTENT:".forge-tooltip",ARROW:".arrow",DEFAULT_SLOT:"slot:not([name])"},e={elementName:D,observedAttributes:b,attributes:C,numbers:I,defaults:F,selectors:R};class H extends A{constructor(t){super(t),this._anchorElement=null,this._overlayElement=null,this._contentElement=d(this._component,e.selectors.CONTENT),this._arrowElement=d(this._component,e.selectors.ARROW),this._defaultSlotElement=d(this._component,e.selectors.DEFAULT_SLOT)}get anchorElement(){return this._anchorElement}get hasContent(){return this._defaultSlotElement.assignedNodes({flatten:!0}).some(t=>t.nodeType===Node.ELEMENT_NODE||t.nodeType===Node.TEXT_NODE&&t.textContent?.trim())}syncAria(){const t=this._component.type==="description"?"tooltip":null;if(this._component[c]({role:t}),this._component[c]({ariaHidden:"true"},{setAttribute:!this._component.hasAttribute("aria-hidden")}),this._anchorElement){if(this._component.type==="label"&&this._anchorElement.hasAttribute("aria-labelledby")||this._component.type==="description"&&this._anchorElement.hasAttribute("aria-describedby"))return;switch(!this._component.hasAttribute("id")&&this._component.type!=="presentation"&&(this._component.id=`forge-tooltip-${T()}`),this._component.type){case"description":this._anchorElement.setAttribute("aria-describedby",this._component.id);break;case"label":this._anchorElement.setAttribute("aria-labelledby",this._component.id);break}}}detachAria(){this._component.type==="description"&&this._anchorElement?.getAttribute("aria-describedby")===this._component.id&&this._anchorElement?.removeAttribute("aria-describedby"),this._component.type==="label"&&this._anchorElement?.getAttribute("aria-labelledby")===this._component.id&&this._anchorElement?.removeAttribute("aria-labelledby")}setAnchorElement(t){this._anchorElement=t}tryLocateAnchorElement(t){this._anchorElement=this._tryFindAnchorElement(t)}addAnchorListener(t,o,a){this._anchorElement?.addEventListener(t,o,a)}removeAnchorListener(t,o){this._anchorElement?.removeEventListener(t,o)}addLightDismissListener(t){this._overlayElement?.addEventListener(_.events.LIGHT_DISMISS,t)}removeLightDismissListener(t){this._overlayElement?.removeEventListener(_.events.LIGHT_DISMISS,t)}isKeyboardFocused(){return!!this._anchorElement?.matches(":focus-visible")}show(){if(this._overlayElement||(this._overlayElement=document.createElement(_.elementName),this._overlayElement.setAttribute("part","root:overlay")),this._overlayElement.placement=this._component.placement,this._overlayElement.anchorElement=this._anchorElement,this._overlayElement.arrowElement=this._arrowElement,this._overlayElement.offset={mainAxis:this._component.offset},this._overlayElement.flip=this._component.flip,this._component.fallbackPlacements&&(this._overlayElement.fallbackPlacements=this._component.fallbackPlacements),this._component.boundaryElement)this._overlayElement.boundaryElement=this._component.boundaryElement;else if(this._component.boundary){const t=P(this._component,this._component.boundary);this._overlayElement.boundaryElement=t}else this._overlayElement.boundaryElement=null;this._component.shadowRoot?.appendChild(this._overlayElement),this._overlayElement.appendChild(this._contentElement),this._overlayElement.open=!0}hide(){this._overlayElement&&(this._overlayElement.open=!1),this._component.shadowRoot?.appendChild(this._contentElement),this._overlayElement?.remove()}_tryFindAnchorElement(t){if(t){const o=this._component.getRootNode(),a=o.getElementById(t)??o.querySelector(t);if(a)return a}return this._component.previousElementSibling??this._component.parentElement}}class Y extends O(Object){constructor(t){super(),this._adapter=t,this._open=!1,this._type=e.defaults.TYPE,this._delay=e.defaults.DELAY,this._placement=e.defaults.PLACEMENT,this._offset=e.defaults.OFFSET,this._flip=e.defaults.FLIP,this._boundary=null,this._boundaryElement=null,this._fallbackPlacements=null,this._triggerTypes=e.defaults.TRIGGER_TYPES,this._hoverStartListener=this._onHoverStart.bind(this),this._hoverEndListener=this._onHoverEnd.bind(this),this._focusListener=this._onFocus.bind(this),this._blurListener=this._onBlur.bind(this),this._keyboardFocusListener=this._onKeyboardFocus.bind(this),this._keyboardBlurListener=this._onKeyboardBlur.bind(this),this._scrollListener=this._onTryHide.bind(this),this._mouseDownListener=this._onTryHide.bind(this),this._dragListener=this._onTryHide.bind(this),this._lightDismissListener=this._onTryHide.bind(this)}initialize(){this._adapter.tryApplyGlobalConfiguration(["type","delay","placement","offset","flip","boundaryElement","fallbackPlacements","triggerType"]),this._adapter.anchorElement||this._adapter.tryLocateAnchorElement(this._anchor),this._adapter.syncAria(),this._attachAnchorListeners(),this._open&&this._show()}destroy(){this._open&&this._hide(),this._adapter.detachAria(),this._detachAnchorListeners()}syncTooltipAria(){this._adapter.syncAria()}_attachAnchorListeners(){if(!this._adapter.anchorElement)return;const t=[...this._triggerTypes];m||(t.splice(t.indexOf("hover"),1),t.push("longpress"));const o={hover:()=>{this._adapter.addAnchorListener("mouseenter",this._hoverStartListener),t.includes("focus")||this._adapter.addAnchorListener("focusin",this._keyboardFocusListener)},longpress:()=>this._startLongpressListener(this._adapter.anchorElement),focus:()=>this._adapter.addAnchorListener("focusin",this._focusListener)};t.forEach(a=>o[a]())}_detachAnchorListeners(){if(!this._adapter.anchorElement)return;const t=[...this._triggerTypes];m||t.push("longpress");const o={hover:()=>{this._adapter.removeAnchorListener("mouseenter",this._hoverStartListener),this._adapter.removeAnchorListener("mousedown",this._hoverEndListener),this._adapter.removeAnchorListener("mouseleave",this._hoverEndListener),t.includes("focus")||(this._adapter.removeAnchorListener("focusin",this._keyboardFocusListener),this._adapter.removeAnchorListener("focusout",this._keyboardBlurListener))},longpress:()=>this._stopLongpressListener(this._adapter.anchorElement),focus:()=>{this._adapter.removeAnchorListener("focusin",this._focusListener),this._adapter.removeAnchorListener("focusout",this._blurListener)}};t.forEach(a=>o[a]())}_show(){this._adapter.hasContent&&(this._open=!0,this._adapter.show(),y.instance.add(this._adapter.hostElement),this._attachDismissListeners(),this._adapter.toggleHostAttribute(e.attributes.OPEN,this._open))}_hide(){window.clearTimeout(this._hoverTimeout),window.clearTimeout(this._longpressVisibilityTimeout),this._open=!1,this._adapter.hide(),y.instance.remove(this._adapter.hostElement),this._detachDismissListeners(),this._adapter.toggleHostAttribute(e.attributes.OPEN,this._open)}_attachDismissListeners(){this._adapter.addAnchorListener("mousedown",this._mouseDownListener),this._adapter.addAnchorListener("dragstart",this._dragListener),this._adapter.addDocumentListener("scroll",this._scrollListener),this._adapter.addDocumentListener("wheel",this._scrollListener),this._adapter.addLightDismissListener(this._lightDismissListener)}_detachDismissListeners(){this._adapter.removeAnchorListener("mousedown",this._mouseDownListener),this._adapter.removeAnchorListener("dragstart",this._dragListener),this._adapter.removeDocumentListener("scroll",this._scrollListener),this._adapter.removeDocumentListener("wheel",this._scrollListener),this._adapter.removeLightDismissListener(this._lightDismissListener)}_onHoverStart(t){this._open||(this._adapter.addAnchorListener("mousedown",this._hoverEndListener),this._adapter.addAnchorListener("mouseleave",this._hoverEndListener),this._delay?this._hoverTimeout=window.setTimeout(()=>{this._onTryShow()},this._delay):this._onTryShow())}_onHoverEnd(t){this._adapter.removeAnchorListener("mousedown",this._hoverEndListener),this._adapter.removeAnchorListener("mouseleave",this._hoverEndListener),window.clearTimeout(this._hoverTimeout),this._onTryHide()}_onFocus(t){this._open||(this._adapter.addAnchorListener("focusout",this._blurListener),this._onTryShow())}_onBlur(t){this._adapter.removeAnchorListener("focusout",this._blurListener),this._onTryHide()}_onKeyboardFocus(t){this._open||this._adapter.isKeyboardFocused()&&(this._adapter.addAnchorListener("focusout",this._keyboardBlurListener),this._onTryShow())}_onKeyboardBlur(t){this._adapter.removeAnchorListener("focusout",this._keyboardBlurListener),this._onTryHide()}_onLongpress(){this._onTryShow()}_onLongpressEnd(t){super._onLongpressEnd(t),this._longpressVisibilityTimeout=window.setTimeout(()=>{this._onTryHide()},e.numbers.LONGPRESS_VISIBILITY_DURATION)}_onTryShow(){this._open||this._show()}_onTryHide(){this._open&&this._hide()}get open(){return this._open}set open(t){t=!!t,this._open!==t&&(this._adapter.isConnected?this._open?this._hide():this._show():this._open=t)}get type(){return this._type}set type(t){t??=e.defaults.TYPE,this._type!==t&&(this._type=t,this._adapter.isConnected&&this._adapter.syncAria(),this._adapter.toggleHostAttribute(e.attributes.TYPE,this._type!==e.defaults.TYPE,this._type))}get anchor(){return this._anchor}set anchor(t){this._anchor!==t&&(this._anchor=t,this._adapter.isConnected&&(this._detachAnchorListeners(),this._adapter.detachAria(),this._adapter.tryLocateAnchorElement(this._anchor),this._adapter.syncAria(),this._attachAnchorListeners()),this._adapter.toggleHostAttribute(e.attributes.ANCHOR,!!this._anchor,this._anchor))}get anchorElement(){return this._adapter.anchorElement}set anchorElement(t){this._adapter.anchorElement!==t&&(this._adapter.isConnected&&(this._detachAnchorListeners(),this._adapter.detachAria()),this._adapter.setAnchorElement(t),this._adapter.isConnected&&(this._adapter.syncAria(),this._attachAnchorListeners()))}get delay(){return this._delay}set delay(t){this._delay!==t&&(this._delay=t,this._adapter.setHostAttribute(e.attributes.DELAY,String(this._delay)))}get placement(){return this._placement}set placement(t){t??=e.defaults.PLACEMENT,this._placement!==t&&(this._placement=t,this._adapter.setHostAttribute(e.attributes.PLACEMENT,String(this._placement)))}get offset(){return this._offset}set offset(t){t??=e.defaults.OFFSET,this._offset!==t&&(this._offset=t,this._adapter.toggleHostAttribute(e.attributes.OFFSET,this._offset!==e.defaults.OFFSET,String(this._offset)))}get flip(){return this._flip}set flip(t){t??=e.defaults.FLIP,this._flip!==t&&(this._flip=t,this._adapter.toggleHostAttribute(e.attributes.FLIP,this._flip!==e.defaults.FLIP,String(this._flip)))}get boundary(){return this._boundary}set boundary(t){this._boundary!==t&&(this._boundary=t,this._adapter.toggleHostAttribute(e.attributes.BOUNDARY,!!this._boundary,this._boundary))}get boundaryElement(){return this._boundaryElement}set boundaryElement(t){this._boundaryElement!==t&&(this._boundaryElement=t,this._adapter.toggleHostAttribute(e.attributes.BOUNDARY,!!this._boundaryElement,this._boundaryElement?.id))}get fallbackPlacements(){return this._fallbackPlacements}set fallbackPlacements(t){this._fallbackPlacements!==t&&(this._fallbackPlacements=t)}get triggerType(){return this._triggerTypes.length===1?this._triggerTypes[0]:this._triggerTypes}set triggerType(t){this._triggerTypes!==t&&(this._adapter.isConnected&&this._detachAnchorListeners(),this._triggerTypes=Array.isArray(t)?t:[t],this._triggerTypes=this._triggerTypes.filter(o=>!!o),this._triggerTypes.length||(this._triggerTypes=e.defaults.TRIGGER_TYPES),this._adapter.isConnected&&this._attachAnchorListeners())}}const B=`<template>
  <div class="forge-tooltip" part="surface">
    <slot></slot>
    <div class="arrow" part="arrow"></div>
  </div>
</template>
`,G='@keyframes slidein{0%{opacity:0;transform:translate(var(--_tooltip-slidein-x)) translateY(var(--_tooltip-slidein-y))}to{opacity:1;transform:translate(0) translateY(0)}}:host{display:contents;pointer-events:none}:host([hidden]){display:none}.forge-tooltip{--_tooltip-background: var(--forge-tooltip-background, var(--forge-theme-surface-inverse, #333333));--_tooltip-color: var(--forge-tooltip-color, var(--forge-theme-on-surface-inverse, #ffffff));--_tooltip-shape: var(--forge-tooltip-shape, calc(var(--forge-shape-medium, 4px) * var(--forge-shape-factor, 1)));--_tooltip-padding: var(--forge-tooltip-padding, var(--forge-spacing-xsmall, 8px));--_tooltip-padding-block: var(--forge-tooltip-padding-block, var(--_tooltip-padding));--_tooltip-padding-inline: var(--forge-tooltip-padding-inline, var(--_tooltip-padding));--_tooltip-width: var(--forge-tooltip-width, max-content);--_tooltip-max-width: var(--forge-tooltip-max-width, 320px);--_tooltip-elevation: var(--forge-tooltip-elevation, var(--forge-theme-surface-bright-shadow, 0px 3px 1px -2px rgba(0, 0, 0, .2), 0px 2px 2px 0px rgba(0, 0, 0, .14), 0px 1px 5px 0px rgba(0, 0, 0, .12)));--_tooltip-content-align: var(--forge-tooltip-content-align, center);--_tooltip-border-width: var(--forge-tooltip-border-width, 0);--_tooltip-border-style: var(--forge-tooltip-border-style, solid);--_tooltip-border-color: var(--forge-tooltip-border-color, var(--forge-theme-outline, #e0e0e0));--_tooltip-animation-timing: var(--forge-tooltip-animation-timing, var(--forge-animation-easing-decelerate, cubic-bezier(0, 0, 0, 1)));--_tooltip-animation-duration: var(--forge-tooltip-animation-duration, var(--forge-animation-duration-short3, .15s));--_tooltip-animation-offset: var(--forge-tooltip-animation-offset, 24px);--_tooltip-arrow-size: var(--forge-tooltip-arrow-size, 8px);--_tooltip-arrow-height: var(--forge-tooltip-arrow-height, var(--_tooltip-arrow-size));--_tooltip-arrow-width: var(--forge-tooltip-arrow-width, var(--_tooltip-arrow-size));--_tooltip-arrow-shape: var(--forge-tooltip-arrow-shape, calc(var(--forge-shape-small, 2px) * var(--forge-shape-factor, 1)));--_tooltip-arrow-rotation: var(--forge-tooltip-arrow-rotation, 0deg);--_tooltip-arrow-top-rotation: var(--forge-tooltip-arrow-top-rotation, 315deg);--_tooltip-arrow-right-rotation: var(--forge-tooltip-arrow-right-rotation, 45deg);--_tooltip-arrow-bottom-rotation: var(--forge-tooltip-arrow-bottom-rotation, 135deg);--_tooltip-arrow-left-rotation: var(--forge-tooltip-arrow-left-rotation, 225deg)}.forge-tooltip{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font-family:var(--forge-typography-body1-font-family, var(--forge-typography-font-family, "Roboto", sans-serif));font-size:var(--forge-typography-body1-font-size, calc(var(--forge-typography-font-size, 1rem) * var(--forge-typography-body-font-size-scale, .875)));font-weight:var(--forge-typography-body1-font-weight, 400);line-height:var(--forge-typography-body1-line-height, calc(var(--forge-typography-font-size, 1rem) * var(--forge-typography-body-line-height-scale, 1.125)));letter-spacing:var(--forge-typography-body1-letter-spacing, .0357142857em);text-transform:var(--forge-typography-body1-text-transform, inherit);text-decoration:var(--forge-typography-body1-text-decoration, inherit);position:relative;background:var(--_tooltip-background);color:var(--_tooltip-color);border-radius:var(--_tooltip-shape);border-width:var(--_tooltip-border-width);border-style:var(--_tooltip-border-style);border-color:var(--_tooltip-border-color);padding-block:var(--_tooltip-padding-block);padding-inline:var(--_tooltip-padding-inline);box-shadow:var(--_tooltip-elevation);width:var(--_tooltip-width);max-width:var(--_tooltip-max-width);pointer-events:none;text-align:var(--_tooltip-content-align);line-height:normal;white-space:normal;animation-duration:var(--_tooltip-animation-duration);animation-timing-function:var(--_tooltip-animation-timing);animation-name:slidein;animation-fill-mode:forwards}:host(:not([open])) .forge-tooltip{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);clip-path:inset(50%);white-space:nowrap;border:0}.arrow{position:absolute;contain:strict;background-color:inherit;height:var(--_tooltip-arrow-height);width:var(--_tooltip-arrow-width);box-shadow:inherit;border:inherit;border-end-start-radius:var(--_tooltip-arrow-shape);rotate:var(--_tooltip-arrow-rotation);clip-path:var(--_tooltip-arrow-clip-path);--_tooltip-arrow-translate-x: 0;--_tooltip-arrow-translate-y: 0;--_tooltip-arrow-clip-path: polygon(0 0, 0 100%, 100% 100%)}.forge-tooltip{--_tooltip-slidein-x: 0;--_tooltip-slidein-y: 0}forge-overlay[open][position-placement^=top] .forge-tooltip{--_tooltip-slidein-y: var(--forge-tooltip-slidein-y, var(--_tooltip-animation-offset))}forge-overlay[open][position-placement^=top] .arrow{--_tooltip-arrow-rotation: var(--_tooltip-arrow-top-rotation);margin-block-end:var(--_tooltip-border-width)}forge-overlay[open][position-placement^=right] .forge-tooltip{--_tooltip-slidein-x: var(--forge-tooltip-slidein-x, calc(var(--_tooltip-animation-offset) * -1))}forge-overlay[open][position-placement^=right] .arrow{--_tooltip-arrow-rotation: var(--_tooltip-arrow-right-rotation);margin-inline-start:var(--_tooltip-border-width)}forge-overlay[open][position-placement^=bottom] .forge-tooltip{--_tooltip-slidein-y: var(--forge-tooltip-slidein-y, calc(var(--_tooltip-animation-offset) * -1))}forge-overlay[open][position-placement^=bottom] .arrow{--_tooltip-arrow-rotation: var(--_tooltip-arrow-bottom-rotation);margin-block-start:var(--_tooltip-border-width)}forge-overlay[open][position-placement^=left] .forge-tooltip{--_tooltip-slidein-x: var(--forge-tooltip-slidein-x, var(--_tooltip-animation-offset))}forge-overlay[open][position-placement^=left] .arrow{--_tooltip-arrow-rotation: var(--_tooltip-arrow-left-rotation);margin-inline-end:var(--_tooltip-border-width)}';var z=Object.defineProperty,M=Object.getOwnPropertyDescriptor,i=(n,t,o,a)=>{for(var h=a>1?void 0:a?M(t,o):t,l=n.length-1,p;l>=0;l--)(p=n[l])&&(h=(a?p(t,o,h):p(h))||h);return a&&h&&z(t,o,h),h};let r=class extends N(k(v)){static get observedAttributes(){return Object.values(e.observedAttributes)}constructor(){super(),E(this,B,G),this._core=new Y(new H(this))}[x](n){return!0}connectedCallback(){this._core.initialize()}disconnectedCallback(){this._core.destroy()}attributeChangedCallback(n,t,o){switch(n){case e.observedAttributes.ID:this._core.syncTooltipAria();break;case e.observedAttributes.OPEN:this.open=w(o);break;case e.observedAttributes.TYPE:this.type=o?.trim()?o:e.defaults.TYPE;break;case e.observedAttributes.TARGET:case e.observedAttributes.ANCHOR:this.anchor=o;break;case e.observedAttributes.DELAY:this.delay=f(o);break;case e.observedAttributes.POSITION:case e.observedAttributes.PLACEMENT:this.placement=o;break;case e.observedAttributes.OFFSET:this.offset=f(o);break;case e.observedAttributes.FLIP:this.flip=o;break;case e.observedAttributes.BOUNDARY:this.boundary=o;break;case e.observedAttributes.FALLBACK_PLACEMENTS:this.fallbackPlacements=o?.trim()?g(o):null;break;case e.observedAttributes.TRIGGER_TYPE:this.triggerType=o?.trim()?g(o):e.defaults.TRIGGER_TYPES;break}}};i([s()],r.prototype,"open",2);i([s()],r.prototype,"type",2);i([s()],r.prototype,"anchor",2);i([s()],r.prototype,"anchorElement",2);i([s({name:"anchor"})],r.prototype,"target",2);i([s()],r.prototype,"placement",2);i([s({name:"placement"})],r.prototype,"position",2);i([s()],r.prototype,"delay",2);i([s()],r.prototype,"offset",2);i([s()],r.prototype,"flip",2);i([s()],r.prototype,"boundary",2);i([s()],r.prototype,"boundaryElement",2);i([s()],r.prototype,"fallbackPlacements",2);i([s()],r.prototype,"triggerType",2);r=i([L({name:e.elementName,dependencies:[S]})],r);export{e as T,r as a};
