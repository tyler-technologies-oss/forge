import{c as s}from"./constants-DzQy6WDX.js";const i=500;function L(n=class{}){class r extends n{constructor(){super(...arguments),this._longpressStartListener=this._onLongpressStart.bind(this),this._longpressEndListener=this._onLongpressEnd.bind(this),this._longpressContextMenuListener=this._onLongpressContextMenu.bind(this),this._longpressClickPrevent=this._onLongpressClickPrevent.bind(this),this._longpressDelay=i}_startLongpressListener(e){const t=s?"pointerdown":"touchstart";e.addEventListener(t,this._longpressStartListener)}_stopLongpressListener(e){const t=s?"pointerdown":"touchstart";e.removeEventListener(t,this._longpressStartListener),this._unlistenLongpressEnd(e)}_onLongpressStart(e){e.target.setPointerCapture(e.pointerId),this._listenLongpressEnd(e.target),this._longpressTimeout=window.setTimeout(()=>{this._onLongpress(),s||navigator.vibrate(1),e.target.addEventListener("click",this._longpressClickPrevent,{capture:!0,once:!0})},this._longpressDelay)}_onLongpressClickPrevent(e){e.stopPropagation()}_onLongpressEnd(e){this._clearTimeout(),this._unlistenLongpressEnd(e.target)}_onLongpressContextMenu(e){this._clearTimeout(),e.target.removeEventListener("click",this._longpressClickPrevent,{capture:!0}),this._unlistenLongpressEnd(e.target)}_listenLongpressEnd(e){s?(e.addEventListener("pointerup",this._longpressEndListener),e.addEventListener("pointercancel",this._longpressEndListener),e.addEventListener("contextmenu",this._longpressContextMenuListener)):e.addEventListener("touchend",this._longpressEndListener)}_unlistenLongpressEnd(e){s?(e.removeEventListener("pointerup",this._longpressEndListener),e.removeEventListener("pointercancel",this._longpressEndListener),e.removeEventListener("contextmenu",this._longpressContextMenuListener)):e.removeEventListener("touchend",this._longpressEndListener)}_clearTimeout(){window.clearTimeout(this._longpressTimeout),this._longpressTimeout=void 0}}return r}export{L as W};
