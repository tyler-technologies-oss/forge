import{C as h,j as _,B as l,k as g}from"./constants-NErMj_Tj.js";import{B as p,c}from"./base-adapter-Ch0oiIsw.js";import{c as d}from"./feature-detection-CY6TVbRZ.js";import{l as v}from"./utils-CRxrUqQD.js";import"./index-CiLSBptl.js";class m extends p{constructor(t){super(t),this._targetElement=null}destroy(){this._targetElement=null}hasTargetElement(){return!!this._targetElement}addTargetListener(t,e){var a;(a=this._targetElement)==null||a.addEventListener(t,e)}removeTargetListener(t,e){var a;(a=this._targetElement)==null||a.removeEventListener(t,e)}getTargetElement(){return this._targetElement}setTargetElement(t){this._targetElement=t}trySetTarget(t){this._targetElement=v(this._component,t)}isActive(t,e){const a=e??this._targetElement;return!!(a!=null&&a.matches(t))}}const w=`${h}focus-indicator`,b={TARGET:"target",ACTIVE:"active",INWARD:"inward",CIRCULAR:"circular",ALLOW_FOCUS:"allow-focus",FOCUS_MODE:"focus-mode"},C={...b},E={FOCUS_MODE:"focusin"},r={elementName:w,attributes:C,defaults:E};class A{constructor(t){this._adapter=t,this._target=null,this._active=!1,this._inward=!1,this._circular=!1,this._allowFocus=!1,this._focusMode=r.defaults.FOCUS_MODE,this._interactionListener=e=>this._onInteraction(e)}initialize(){this._adapter.hasTargetElement()||this._adapter.trySetTarget(this._target),this._addListeners()}destroy(){this._removeListeners(),this._adapter.destroy()}_addListeners(){this._adapter.addTargetListener(this._focusMode,this._interactionListener),this._adapter.addTargetListener("focusout",this._interactionListener),this._adapter.addTargetListener("pointerdown",this._interactionListener)}_removeListeners(){this._adapter.removeTargetListener(this._focusMode,this._interactionListener),this._adapter.removeTargetListener("focusout",this._interactionListener),this._adapter.removeTargetListener("pointerdown",this._interactionListener)}_onInteraction(t){const e=t.target;switch(t.type){case this._focusMode:this.active=this._adapter.isActive(this._allowFocus?":focus":":focus-visible",e);break;case"focusout":this.active=!1;break;case"pointerdown":this.active=this._allowFocus?this._adapter.isActive(":focus",e):this._adapter.isActive(":focus-visible",e);break}}get targetElement(){return this._adapter.getTargetElement()}set targetElement(t){this._removeListeners(),this._adapter.setTargetElement(t),this._addListeners()}get target(){return this._adapter.getHostAttribute(r.attributes.TARGET)}set target(t){this._target!==t&&(this._target=t,this._adapter.isConnected&&this._adapter.trySetTarget(t),this._adapter.toggleHostAttribute(r.attributes.TARGET,!!this._target,this._target))}get active(){return this._active}set active(t){t=!!t,this._active!==t&&(this._active=t,this._adapter.toggleHostAttribute(r.attributes.ACTIVE,this._active))}get inward(){return this._inward}set inward(t){t=!!t,this._inward!==t&&(this._inward=t,this._adapter.toggleHostAttribute(r.attributes.INWARD,this._inward))}get circular(){return this._circular}set circular(t){t=!!t,this._circular!==t&&(this._circular=t,this._adapter.toggleHostAttribute(r.attributes.CIRCULAR,this._circular))}get allowFocus(){return this._allowFocus}set allowFocus(t){t=!!t,this._allowFocus!==t&&(this._allowFocus=t,this._adapter.toggleHostAttribute(r.attributes.ALLOW_FOCUS,this._allowFocus))}get focusMode(){return this._focusMode}set focusMode(t){if(t??(t=r.defaults.FOCUS_MODE),this._focusMode!==t){this._adapter.isConnected&&this._removeListeners(),this._focusMode=t,this._adapter.isConnected&&this._addListeners();const e=this._focusMode!==r.defaults.FOCUS_MODE;this._adapter.toggleHostAttribute(r.attributes.FOCUS_MODE,e,this._focusMode)}}}const L=`<template></template>
`,T=":host{--_focus-indicator-display: var(--forge-focus-indicator-display, flex);--_focus-indicator-width: var(--forge-focus-indicator-width, var(--forge-border-medium, 2px));--_focus-indicator-active-width: var(--forge-focus-indicator-active-width, 6px);--_focus-indicator-color: var(--forge-focus-indicator-color, var(--forge-theme-primary, #3f51b5));--_focus-indicator-shape: var(--forge-focus-indicator-shape, calc(var(--forge-shape-extra-small, 1px) * var(--forge-shape-factor, 1)));--_focus-indicator-duration: var(--forge-focus-indicator-duration, var(--forge-animation-duration-long4, .6s));--_focus-indicator-easing: var(--forge-focus-indicator-easing, var(--forge-animation-easing-emphasized, cubic-bezier(.2, 0, 0, 1)));--_focus-indicator-shape-start-start: var(--forge-focus-indicator-shape-start-start, var(--_focus-indicator-shape));--_focus-indicator-shape-start-end: var(--forge-focus-indicator-shape-start-end, var(--_focus-indicator-shape));--_focus-indicator-shape-end-end: var(--forge-focus-indicator-shape-end-end, var(--_focus-indicator-shape));--_focus-indicator-shape-end-start: var(--forge-focus-indicator-shape-end-start, var(--_focus-indicator-shape));--_focus-indicator-outward-offset: var(--forge-focus-indicator-outward-offset, var(--forge-spacing-xxsmall, 4px));--_focus-indicator-inward-offset: var(--forge-focus-indicator-inward-offset, 0px);--_focus-indicator-offset-block: var(--forge-focus-indicator-offset-block, 0);--_focus-indicator-offset-inline: var(--forge-focus-indicator-offset-inline, 0)}:host{animation-delay:0s,calc(var(--_focus-indicator-duration) * .25);animation-duration:calc(var(--_focus-indicator-duration) * .25),calc(var(--_focus-indicator-duration) * .75);animation-timing-function:var(--_focus-indicator-easing);box-sizing:border-box;color:var(--_focus-indicator-color);display:none;pointer-events:none;position:absolute;margin-block:var(--_focus-indicator-offset-block);margin-inline:var(--_focus-indicator-offset-inline)}:host([hidden]){display:none}:host([active]){display:var(--_focus-indicator-display)}:host(:not([inward])){animation-name:forge-focus-indicator-outward-grow,forge-focus-indicator-outward-shrink;border-end-end-radius:calc(var(--_focus-indicator-shape-end-end) + var(--_focus-indicator-outward-offset));border-end-start-radius:calc(var(--_focus-indicator-shape-end-start) + var(--_focus-indicator-outward-offset));border-start-end-radius:calc(var(--_focus-indicator-shape-start-end) + var(--_focus-indicator-outward-offset));border-start-start-radius:calc(var(--_focus-indicator-shape-start-start) + var(--_focus-indicator-outward-offset));inset:calc(-1 * var(--_focus-indicator-outward-offset));outline:var(--_focus-indicator-width) solid currentColor}:host([inward]){animation-name:forge-focus-indicator-inward-grow,forge-focus-indicator-inward-shrink;border-end-end-radius:calc(var(--_focus-indicator-shape-end-end) - var(--_focus-indicator-inward-offset));border-end-start-radius:calc(var(--_focus-indicator-shape-end-start) - var(--_focus-indicator-inward-offset));border-start-end-radius:calc(var(--_focus-indicator-shape-start-end) - var(--_focus-indicator-inward-offset));border-start-start-radius:calc(var(--_focus-indicator-shape-start-start) - var(--_focus-indicator-inward-offset));border:var(--_focus-indicator-width) solid currentColor;inset:var(--_focus-indicator-inward-offset)}:host([circular]){--_focus-indicator-shape: var(--forge-focus-indicator-shape, 50%)}@keyframes forge-focus-indicator-outward-grow{0%{outline-width:0}to{outline-width:var(--_focus-indicator-active-width)}}@keyframes forge-focus-indicator-outward-shrink{0%{outline-width:var(--_focus-indicator-active-width)}}@keyframes forge-focus-indicator-inward-grow{0%{border-width:0}to{border-width:var(--_focus-indicator-active-width)}}@keyframes forge-focus-indicator-inward-shrink{0%{border-width:var(--_focus-indicator-active-width)}}@media (prefers-reduced-motion){:host{animation:none}}";var O=Object.defineProperty,y=Object.getOwnPropertyDescriptor,o=(n,t,e,a)=>{for(var s=a>1?void 0:a?y(t,e):t,f=n.length-1,u;f>=0;f--)(u=n[f])&&(s=(a?u(t,e,s):u(s))||s);return a&&s&&O(t,e,s),s};let i=class extends l{static get observedAttributes(){return Object.values(r.attributes)}constructor(){super(),g(this,L,T),this._core=new A(new m(this))}connectedCallback(){this._core.initialize()}disconnectedCallback(){this._core.destroy()}attributeChangedCallback(n,t,e){switch(n){case r.attributes.TARGET:this.target=e;break;case r.attributes.ACTIVE:this.active=d(e);break;case r.attributes.INWARD:this.inward=d(e);break;case r.attributes.CIRCULAR:this.circular=d(e);break;case r.attributes.ALLOW_FOCUS:this.allowFocus=d(e);break;case r.attributes.FOCUS_MODE:this.focusMode=e;break}}};o([c()],i.prototype,"targetElement",2);o([c()],i.prototype,"target",2);o([c()],i.prototype,"active",2);o([c()],i.prototype,"inward",2);o([c()],i.prototype,"circular",2);o([c()],i.prototype,"allowFocus",2);o([c()],i.prototype,"focusMode",2);i=o([_({name:r.elementName})],i);export{i as F,r as a};
