import{C as h,h as _,j as d,k as m}from"./constants-D2tqnpVB.js";import{z as c,P as E,A as v}from"./feature-detection-CY6TVbRZ.js";import{F as f}from"./index-RsKXMDm2.js";import{i as o,C}from"./calendar-BS7cV5QE.js";import"./index-CiLSBptl.js";import{a as g,I as b}from"./icon-D5yjdXv8.js";import{I}from"./icon-button-4fx-LScl.js";import"./focus-indicator-NbLDNrYT.js";import"./state-layer-sxQMIn2c.js";import{P as D}from"./popover-CwjND5aw.js";import"./overlay-8j8D8Fh1.js";import{B as A,C as V,D as y,a as k,b as w,c as M}from"./base-date-picker-core-BLWUcYQE.js";import{l as P}from"./text-field-BwqsFKuZ.js";import{d as T,s as S}from"./utils-CRxrUqQD.js";const r=`${h}date-picker`,N={VALUE:"value"},O={INPUT:"input,input[forge-date-picker-input]"},L={CHANGE:`${r}-change`,OPEN:`${r}-open`,CLOSE:`${r}-close`,INPUT:`${r}-input`},a={elementName:r,selectors:O,events:L,observedAttributes:N};class x extends A{constructor(t){super(t),this._dropdownIdentifier=`forge-date-picker-${this._identifier}`}_initializeInput(){this._inputElement=this._component.querySelector(a.selectors.INPUT)}_initializeCalendarDropdown(){const t=this._getDefaultTargetElement();this._calendarDropdown=new V(t,this._dropdownIdentifier)}initializeMask(t){var e;(e=this._inputMask)==null||e.destroy(),this._inputMask=new y(this._inputElement,t)}destroyMask(){var t;(t=this._inputMask)==null||t.destroy(),this._inputMask=void 0}initializeAccessibility(){this._inputElement.setAttribute("autocomplete","off"),this._inputElement.setAttribute("autocorrect","off"),this._inputElement.setAttribute("autocapitalize","off"),this._inputElement.setAttribute("spellcheck","false"),this._inputElement.setAttribute("role","combobox"),this._inputElement.setAttribute("aria-live","assertive"),this._inputElement.setAttribute("aria-atomic","true"),this._inputElement.setAttribute("aria-haspopup","true"),this._inputElement.setAttribute("aria-expanded","false"),this._inputElement.setAttribute("aria-owns",this._dropdownIdentifier),T(),S(this._inputElement)}addInputListener(t,e,i){var s;(s=this._inputElement)==null||s.addEventListener(t,e,{capture:i})}removeInputListener(t,e,i){var s;(s=this._inputElement)==null||s.removeEventListener(t,e,{capture:i})}setInputValueChangedListener(t,e){this.destroyValueChangeListener();const i=P(t,this._inputElement,"value",e);this._valueChangeListeners.push(i)}hasInputElement(){return!!this._inputElement}attachCalendar(t,e){super.attachCalendar(t,e),this._inputElement.setAttribute("aria-expanded","true")}detachCalendar(){super.detachCalendar(),this._inputElement&&(this._inputElement.setAttribute("aria-expanded","false"),this._inputElement.removeAttribute("aria-activedescendant"))}setActiveDescendant(t){this._inputElement.setAttribute("aria-activedescendant",t)}setInputValue(t,e){this._inputElement.value!==t&&(this._inputElement.value=t,this._inputMask&&this._inputMask.updateMask(),e&&(this._inputElement.dispatchEvent(new Event("change")),this._inputElement.dispatchEvent(new Event("input"))))}isInputDisabled(){return this._inputElement.disabled}isInputFocused(){return c(this._component.ownerDocument)===this._inputElement}getInputValue(){return this._inputMask?this._inputMask.maskedValue:this._inputElement.value}setDisabled(t){this._inputElement.disabled=t,this._inputElement.setAttribute("aria-disabled",t.toString()),this._toggleElement&&(this._toggleElement.setAttribute("aria-disabled",t.toString()),this._toggleElement.hasOwnProperty("disabled")&&(this._toggleElement.disabled=t,this._toggleElement.tabIndex=-1))}tryFocusInput(){this._inputElement.focus()}tryBlurInput(){this._inputElement.blur()}selectInputText(){this._inputElement.select()}emitInputEvent(t,e){_(this._inputElement,t,e)}}class z extends k{constructor(t){super(t),this._mode="single"}_initializeState(){this._value||(this._value=this._coerceDateValue(this._adapter.getInputValue()))}_emitChangeEvent(t,e){const i=this._getTypedValue(t);return this._adapter.emitHostEvent(a.events.CHANGE,i,!0,!e)?(this._setValue(t),!0):!1}_emitOpenEvent(){this._adapter.emitHostEvent(a.events.OPEN,void 0,!1)}_emitCloseEvent(){this._adapter.emitHostEvent(a.events.CLOSE,void 0,!1)}_onToday(){const t=new Date;this._tryMergeCurrentTime(t),this._onDateSelected({date:t,selected:!0,type:"date"})}_onClear(){this._onDateSelected({date:null,selected:!1,type:"date"})}_getCurrentValue(){return this._value}_setFormattedInputValue(t){const e=this._formatDate(this._value);e?this._adapter.setInputValue(e,t?!1:this._notifyInputValueChanges):this._allowInvalidDate||this._adapter.setInputValue("",t?!1:this._notifyInputValueChanges)}_setValue(t){(!t||this._isDateValueAcceptable(t))&&(this._value=t)}_onDateSelected(t){const e=t.date;if(t.type==="date"&&this._closeCalendar(!0),this._tryMergeCurrentTime(e),!this._emitChangeEvent(e))return;const i=this._formatDate(e);this._adapter.setInputValue(i,this._notifyInputValueChanges),this._formatInputValue(),E.isMobile||this._adapter.selectInputText()}_openCalendar(t){super._openCalendar(t);const e=this._getCurrentValue();e&&this._adapter.goToCalendarDate(new Date(e))}_applyMin(){this._value&&!this._isDateValueAcceptable(this._value)&&(this._emitChangeEvent(null,!0),this._setFormattedInputValue()),super._applyMin()}_applyMax(){this._value&&!this._isDateValueAcceptable(this._value)&&(this._emitChangeEvent(null,!0),this._setFormattedInputValue()),super._applyMax()}_applyDisabledDates(){this._value&&!this._isDateValueAcceptable(this._value)&&(this._emitChangeEvent(null,!0),this._setFormattedInputValue())}_applyDisabledDaysOfWeek(){this._value&&!this._isDateValueAcceptable(this._value)&&(this._emitChangeEvent(null,!0),this._setFormattedInputValue())}_handleInput(t){const e=this._getSanitizedDateString(t),i=this._coerceDateValue(e);this._tryMergeCurrentTime(i),this._masked&&this._adapter.emitInputEvent(a.events.INPUT,e),!o(i,this._value)&&this._isDateValueAcceptable(i)&&this._emitChangeEvent(i)}_onInputValueChanged(t){const e=this._getSanitizedDateString(t);if(this._masked&&e)return;const i=this._coerceDateValue(e);!o(i,this._value)&&this._isDateValueAcceptable(i)&&(this.value=i,this._emitChangeEvent(this._value))}_tryMergeCurrentTime(t){!t||!this._value||t.setHours(this._value.getHours(),this._value.getMinutes(),this._value.getSeconds(),this._value.getMilliseconds())}_applyValue(){this._setFormattedInputValue(),this._open&&this._adapter.setCalendarValue(this._value)}get value(){const t=this._getTypedValue(this._value);return t?v(t)?new Date(t.getTime()):t:null}set value(t){this._value!==t&&(this._setValue(this._coerceDateValue(t)),this._isInitialized&&this._applyValue())}}const F=`<template>
  <slot></slot>
</template>
`,B=":host{display:block}:host([hidden]){display:none}";var H=Object.getOwnPropertyDescriptor,U=(n,t,e,i)=>{for(var s=i>1?void 0:i?H(t,e):t,l=n.length-1,u;l>=0;l--)(u=n[l])&&(s=u(s)||s);return s};let p=class extends w{static get observedAttributes(){return[...Object.values(M.observedAttributes),a.observedAttributes.VALUE]}constructor(){super(),b.define(f),m(this,F,B),this._core=new z(new x(this))}attributeChangedCallback(n,t,e){switch(n){case a.observedAttributes.VALUE:this.value=e;return}super.attributeChangedCallback(n,t,e)}};p=U([d({name:a.elementName,dependencies:[D,C,I,g]})],p);
